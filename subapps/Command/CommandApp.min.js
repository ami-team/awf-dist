(()=>{var t={3199:function(t,n,e){var o,a,i;a=[],o=function(){"use strict";function n(t,n){return void 0===n?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function o(t,n,e){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){r(o.response,n,e)},o.onerror=function(){console.error("could not download file")},o.send()}function a(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch(t){}return 200<=n.status&&299>=n.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof e.g&&e.g.global===e.g?e.g:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(t,n,e){var l=s.URL||s.webkitURL,r=document.createElement("a");n=n||t.name||"download",r.download=n,r.rel="noopener","string"==typeof t?(r.href=t,r.origin===location.origin?i(r):a(r.href)?o(t,n,e):i(r,r.target="_blank")):(r.href=l.createObjectURL(t),setTimeout((function(){l.revokeObjectURL(r.href)}),4e4),setTimeout((function(){i(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,s){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(n(t,s),e);else if(a(t))o(t,e,s);else{var l=document.createElement("a");l.href=t,l.target="_blank",setTimeout((function(){i(l)}))}}:function(t,n,e,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof t)return o(t,n,e);var i="application/octet-stream"===t.type,r=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||i&&r||l)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=t:location=t,a=null},d.readAsDataURL(t)}else{var m=s.URL||s.webkitURL,p=m.createObjectURL(t);a?a.location=p:location.href=p,a=null,setTimeout((function(){m.revokeObjectURL(p)}),4e4)}});s.saveAs=r.saveAs=r,t.exports=r},void 0===(i="function"==typeof o?o.apply(n,a):o)||(t.exports=i)}},n={};function e(o){var a=n[o];if(void 0!==a)return a.exports;var i=n[o]={exports:{}};return t[o].call(i.exports,i,i.exports,e),i.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{"use strict";var t=e(3199),n=e.n(t);$AMIClass("CommandApp",{$extends:ami.SubApp,$init:function(){this.$super.$init()},onReady:function(t){const n=$.Deferred();return amiWebApp.replaceHTML("#ami_main_content",'\x3c!-- *************************************************************************************************************** --\x3e\n\n<style>\n\n.popover {\n\tmin-width: 675px;\n\tmax-width: 675px;\n}\n\n.cmd-tools {\n\tdisplay: inline-block;\n\n\tbackground-color: rgb(250, 250, 250);\n\n\tborder-top: 1px solid rgba(0, 0, 0, 0.2);\n\tborder-left: 1px solid rgba(0, 0, 0, 0.2);\n\tborder-right: 1px solid rgba(0, 0, 0, 0.2);\n\tborder-radius: 0.5rem 0.5rem 0 0;\n}\n\n@media only screen and (max-width: 768px) {\n\n\t#BC8FFF19_0038_C117_D7DE_327E7B5D415D {\n\n\t\twidth: 100%;\n\t}\n\n\t#D847C44B_D28F_49B3_AF79_7A68B3305ED2 {\n\n\t\tborder-bottom: 1px solid #CCC;\n\n\t\theight: auto;\n\t\toverflow-x: visible;\n\t\toverflow-y: scroll;\n\t}\n\n\t#FBACBE5B_D5BC_5EE4_862C_538784442F93,\n\t#FDCB42DD_8E29_9B1A_5EB4_309C6B55BAFB {\n\n\t\tborder-left: 0px solid #CCC;\n\t}\n}\n\n@media only screen and (min-width: 768px) {\n\n\t#BC8FFF19_0038_C117_D7DE_327E7B5D415D {\n\n\t\twidth: 75%;\n\t}\n\n\t#D847C44B_D28F_49B3_AF79_7A68B3305ED2 {\n\n\t\tborder-bottom: 0px solid #CCC;\n\n\t\theight: 300px;\n\t\toverflow-x: hidden;\n\t\toverflow-y: scroll;\n\t}\n\n\t#FBACBE5B_D5BC_5EE4_862C_538784442F93,\n\t#FDCB42DD_8E29_9B1A_5EB4_309C6B55BAFB {\n\n    \tborder-left: 1px solid #CCC;\n    }\n}\n\n</style>\n\n<div class="px-3 py-0">\n\t\x3c!-- *********************************************************************************************************** --\x3e\n\n\t<div class="card mb-4" id="BC8FFF19_0038_C117_D7DE_327E7B5D415D">\n\t\t<div class="card-body py-0">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-4 p-2" id="D847C44B_D28F_49B3_AF79_7A68B3305ED2">\n\t\t\t\t\t\x3c!-- dynamic --\x3e\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-8 py-2" id="FBACBE5B_D5BC_5EE4_862C_538784442F93">\n\t\t\t\t\t<div class="mb-2">\n\t\t\t\t\t\t<label class="form-label" for="CE9A50CD_63CA_4A1E_B336_F45399BEC84D">Command</label>\n\t\t\t\t\t\t<textarea name="command" rows="8" class="form-control form-control-sm" id="CE9A50CD_63CA_4A1E_B336_F45399BEC84D">{{ command|default(\'GetSessionInfo\') }}</textarea>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="mb-2">\n\t\t\t\t\t\t<label class="form-label" for="C8D10895_E8A7_46A0_B638_C8DDDED8F91C">Output format</label>\n\t\t\t\t\t\t<select class="form-select form-select-sm" id="C8D10895_E8A7_46A0_B638_C8DDDED8F91C">\n\t\t\t\t\t\t\t<option value="AMIXmlToText.xsl" selected="selected">TEXT</option>\n\t\t\t\t\t\t\t<option value="AMIXmlToCsv.xsl" xxxxxxxx="xxxxxxxx">CSV</option>\n\t\t\t\t\t\t\t<option value="AMIXmlToJson.xsl" xxxxxxxx="xxxxxxxx">JSON</option>\n\t\t\t\t\t\t\t<option value="AMIXmlToXml.xsl" xxxxxxxx="xxxxxxxx">XML</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="card-footer py-0">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-md-4 text-start py-2" id="A42CD433_6185_8196_7218_ECBFD3863A7F">\n\t\t\t\t\t<input class="form-control" type="text" placeholder="Command filter" id="CE18AED2_E6E7_9CB6_EC3E_790F3D2D5791" onkeyup="commandApp.filter($(\'#CE18AED2_E6E7_9CB6_EC3E_790F3D2D5791\').val());" />\n\t\t\t\t</div>\n\t\t\t\t<div class="col-md-8 text-end py-2" id="FDCB42DD_8E29_9B1A_5EB4_309C6B55BAFB">\n\t\t\t\t\t<button type="button" class="btn btn-primary" id="C124A2A9_B5F5_46F0_AFBC_234859F3F6FA" onclick="commandApp.execute($(\'#CE9A50CD_63CA_4A1E_B336_F45399BEC84D\').val(), $(\'#C8D10895_E8A7_46A0_B638_C8DDDED8F91C\').val());">Execute</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t\x3c!-- *********************************************************************************************************** --\x3e\n\n\t<div id="AB4BA483_EE27_44D0_BB54_F5BFCFE4DA7E"></div>\n\n\t\x3c!-- *********************************************************************************************************** --\x3e\n</div>\n',{dict:{command:t}}).done((()=>{n.resolve()})),n},onLogin:function(){return this.getCommands()},onLogout:function(){return this.getCommands()},getCommands:function(){const t=$.Deferred();return amiCommand.execute("ListCommands").done((n=>{const e=amiLogin.isAuthenticated(),o=amiWebApp.jspath("..row",n),a=[];o.forEach((t=>{const n=amiWebApp.jspath('..field{.@name==="command"}.$',t)[0]||"",o="false"!==(amiWebApp.jspath('..field{.@name==="visible"}.$',t)[0]||"true");let i=amiWebApp.jspath('..field{.@name==="help"}.$',t)[0]||"";const s=amiWebApp.jspath('..field{.@name==="usage"}.$',t)[0]||"";if(o&&e||amiLogin.hasRole("AMI_ADMIN")){let t;s?(t=`${n} ${s}`,i+=`<br /><br />Usage:<br />${n} ${s}`):(t=`${n}`,i+=`<br /><br />Usage:<br />${n}`),i=i.replace(new RegExp(n,"g"),`<strong>${n}</strong>`),a.push({command:n,visible:o,help:i,proto:t})}})),amiWebApp.replaceHTML("#D847C44B_D28F_49B3_AF79_7A68B3305ED2",'<div class="d-flex" data-ami-command="{{ command|e }}">\n\t<span class="w-100" style="cursor: pointer;" onclick="commandApp.select(\'{{ proto|e }}\');">\n\t\t{{ command|e }}\n\t</span>\n\t<a class="flex-shrink-1" href="#" data-bs-toggle="popover" data-bs-boundary="window" data-bs-placement="right" data-bs-trigger="focus" data-bs-html="true" data-bs-title="{{ command|e }}" data-bs-content="&lt;pre&gt;{{ help|e }}&lt;/pre&gt;">\n\t\t<i class="bi bi-question-circle-fill {% if visible %}text-primary{% else %}text-secondary{% endif %}"></i>\n\t</a>\n</div>\n',{dict:a}).done((()=>{t.resolve()}))})).fail(((n,e)=>{t.reject(e)})),t},filter:function(t){t=(t||"").trim().toLowerCase(),$("#D847C44B_D28F_49B3_AF79_7A68B3305ED2 > div[data-ami-command]").each(((n,e)=>{const o=$(e);!t||o.attr("data-ami-command").toLowerCase().indexOf(t)>=0?o.addClass("d-flex").removeClass("d-none"):o.addClass("d-none").removeClass("d-flex")}))},execute:function(t,n){t=t.trim(),n=n.trim(),t&&(amiWebApp.lock(),amiCommand.execute(t,{converter:n}).always(((e,o,a)=>{const i={data:"AMIXmlToJson.xsl"===n?JSON.stringify(e,void 0,2):e,type:"AMIXmlToJson.xsl"!==n?"AMIXmlToXml.xsl"!==n?"text":"xml":"json",cmd:t,url:a};amiWebApp.prependHTML("#AB4BA483_EE27_44D0_BB54_F5BFCFE4DA7E",'<div class="command-result">\n\t<div class="text-end">\n\t\t<div class="cmd-tools">\n\t\t\t<button type="button" class="btn btn-sm btn-link" onclick="commandApp.copy(\'{{ cmd|e }}\');">\n\t\t\t\t<i class="bi bi-clipboard" style="font-size: 1.5rem;"></i>\n\t\t\t\t<small style="font-size: 0.75rem; margin-left: -1.25rem;">CMD</small>\n\t\t\t</button>\n\t\t\t<button type="button" class="btn btn-sm btn-link" onclick="commandApp.copy(\'{{ url|e }}\');">\n\t\t\t\t<i class="bi bi-clipboard" style="font-size: 1.5rem;"></i>\n\t\t\t\t<small style="font-size: 0.75rem; margin-left: -1.25rem;">URL</small>\n\t\t\t</button>\n\t\t\t<button type="button" class="btn btn-sm btn-link" onclick="commandApp.copy($(this).closest(\'.command-result\').find(\'.form-editor\').val());">\n\t\t\t\t<i class="bi bi-clipboard" style="font-size: 1.5rem;"></i>\n\t\t\t\t<small style="font-size: 0.75rem; margin-left: -1.25rem;">RES</small>\n\t\t\t</button>\n\t\t\t<button type="button" class="btn btn-sm btn-link" onclick="commandApp.save($(this).closest(\'.command-result\').find(\'.form-editor\').val());">\n\t\t\t\t<i class="bi bi-download" style="font-size: 1.5rem;"></i>\n\t\t\t</button>\n\t\t\t<button type="button" class="btn btn-sm btn-link" onclick="$(this).closest(\'.command-result\').remove();">\n\t\t\t\t<i class="bi bi-x-circle" style="font-size: 1.5rem;"></i>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<textarea class="form-editor mb-2" data-lang="{{ type|e }}" data-read-only="true" data-word-wrap="true" data-show-border="true" data-rounded="true" style="border-top-right-radius: 0 !important;">{{ data|e }}</textarea>\n</div>\n',{dict:i}).done((()=>{amiWebApp.unlock()}))})))},select:function(t){$("#CE9A50CD_63CA_4A1E_B336_F45399BEC84D").val(t)},copy:function(t){amiWebApp.createControl(null,this,"textBox",[t],{})},save:function(t){const e=$("#C8D10895_E8A7_46A0_B638_C8DDDED8F91C").val().trim();let o,a;"AMIXmlToXml.xsl"===e?(o="application/xml",a="result.xml"):"AMIXmlToJson.xsl"===e?(o="application/json",a="result.json"):"AMIXmlToCsv.xsl"===e?(o="text/csv",a="result.csv"):(o="text/plain",a="result.txt"),n()(new Blob([amiWebApp.htmlToText(t)],{type:o}),a)}}),window.commandApp=new CommandApp})()})();