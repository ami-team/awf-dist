(()=>{"use strict";var t={8922:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",a=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),a&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),a&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,a,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(a)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);a&&s[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},7499:t=>{t.exports=function(t){return t[1]}},6289:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(7499),o=n.n(a),r=n(8922),s=n.n(r)()(o());s.push([t.id,"/*!\n * AMI Web Framework\n *\n * Copyright (c) 2014-2017 The AMI Team\n * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html\n *\n */\n\n/*--------------------------------------------------------------------------------------------------------------------*/\n\n#EFAEDA1C_C8B2_46EA_AC47_A591A0704FE3 {\n\tcolor: #BBB;\n\tborder: 2px dashed rgb(231, 231, 231);\n\tborder-radius: 5px;\n\tpadding: 23.5px;\n\ttext-align: center;\n}\n\n/*--------------------------------------------------------------------------------------------------------------------*/\n",""]);const i=s},3379:t=>{var e=[];function n(t){for(var n=-1,a=0;a<e.length;a++)if(e[a].identifier===t){n=a;break}return n}function a(t,a){for(var r={},s=[],i=0;i<t.length;i++){var c=t[i],l=a.base?c[0]+a.base:c[0],d=r[l]||0,p="".concat(l," ").concat(d);r[l]=d+1;var _=n(p),A={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==_)e[_].references++,e[_].updater(A);else{var u=o(A,a);a.byIndex=i,e.splice(i,0,{identifier:p,updater:u,references:1})}s.push(p)}return s}function o(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=a(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var i=n(r[s]);e[i].references--}for(var c=a(t,o),l=0;l<r.length;l++){var d=n(r[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}r=c}}},569:t=>{var e={};t.exports=function(t,n){var a=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,o&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var r=e[a]={id:a,exports:{}};return t[a](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t=n(3379),e=n.n(t),a=n(7795),o=n.n(a),r=n(569),s=n.n(r),i=n(3565),c=n.n(i),l=n(9216),d=n.n(l),p=n(4589),_=n.n(p),A=n(6289),u={};u.styleTagTransform=_(),u.setAttributes=c(),u.insert=s().bind(null,"head"),u.domAPI=o(),u.insertStyleElement=d();e()(A.Z,u);A.Z&&A.Z.locals&&A.Z.locals;$AMIClass("SchemaViewerApp",{$extends:ami.SubApp,$init:function(){this.$super.$init()},onReady:function(t){$("#ami_breadcrumb_content").css("display","none");const e=$.Deferred();return amiWebApp.loadResources(["ctrl:schema"]).done((n=>{amiWebApp.replaceHTML("#ami_main_content",'<div class="row px-3 py-2">\n\t<div class="col-md-3">\n\n\t\t\x3c!-- ******************************************************************************************************* --\x3e\n\n\t\t<div class="card mb-2">\n\t\t\t<div class="card-header py-2">\n\t\t\t\t<a href="#C4DD1448_3241_4454_A804_16EF6665645A" data-bs-toggle="collapse">Catalogs</a>\n\t\t\t</div>\n\t\t\t<div class="collapse show" id="C4DD1448_3241_4454_A804_16EF6665645A">\n\t\t\t\t<div class="card-body">\n\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t<label class="d-none" for="D015B3C1_B150_4E27_99D9_A628B3F9B0AC"></label>\n\t\t\t\t\t\t<select class="form-select form-select-sm" id="D015B3C1_B150_4E27_99D9_A628B3F9B0AC"></select>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t<div class="btn-group w-100">\n\t\t\t\t\t\t\t<button class="btn btn-sm btn-outline-secondary w-50" id="A9A20536_D366_4AFE_96E3_56E3FAF52179" onclick="schemaViewerApp.openSchema();">Open</button>\n\t\t\t\t\t\t\t<button class="btn btn-sm btn-outline-secondary w-50" id="D342245F_B95E_4CAB_84C5_53B509C28319" onclick="schemaViewerApp.saveSchema();">Save</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t<button class="btn btn-sm btn-outline-secondary w-100" id="D316F050_F66C_8D02_33A0_CFF920BEF817" onclick="schemaViewerApp.flushServerCachesSlow();">Flush server caches (full)</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-xxxxx">\n\t\t\t\t\t\t<button class="btn btn-sm btn-outline-secondary w-100" id="A20151B8_B578_A3F1_AF65_FB5AE59287E6" onclick="schemaViewerApp.flushServerCachesFast();">Flush server caches (partial)</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- ******************************************************************************************************* --\x3e\n\n\t\t<div class="card mb-2">\n\t\t\t<div class="card-header py-2">\n\t\t\t\t<a href="#F5F86E23_C7C0_4C8A_8D67_C997C4DECB50" data-bs-toggle="collapse">Box color</a>\n\t\t\t</div>\n\t\t\t<div class="collapse show" id="F5F86E23_C7C0_4C8A_8D67_C997C4DECB50">\n\t\t\t\t<div class="card-body">\n\t\t\t\t\t<label class="d-none" for="F542C5DA_46FD_6A57_76CB_9A6A949E7F39"></label>\n\t\t\t\t\t<input class="form-control form-control-sm form-control-color w-100" type="color" value="#0066CC" id="F542C5DA_46FD_6A57_76CB_9A6A949E7F39" onchange="schemaViewerApp.setBoxColor($(\'#F542C5DA_46FD_6A57_76CB_9A6A949E7F39\').val());" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- ******************************************************************************************************* --\x3e\n\n\t\t<div class="card mb-0">\n\t\t\t<div class="card-header py-2">\n\t\t\t\t<a href="#FC49A4AA_76EE_4D52_A2B6_5A0E1BAF541D" data-bs-toggle="collapse">Import / Export schema</a>\n\t\t\t</div>\n\t\t\t<div class="collapse show" id="FC49A4AA_76EE_4D52_A2B6_5A0E1BAF541D">\n\t\t\t\t<div class="card-body">\n\t\t\t\t\t<div class="mb-3">\n\t\t\t\t\t\t<div class="" id="EFAEDA1C_C8B2_46EA_AC47_A591A0704FE3">\n\t\t\t\t\t\t\tDrop a file\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-xxxxx">\n\t\t\t\t\t\t<div class="btn-group w-100">\n\t\t\t\t\t\t\t<button class="btn btn-sm btn-outline-secondary w-50" id="A8A2E848_F02A_40C7_8327_53F73B1B2BD6" onclick="schemaViewerApp.exportSchema();">Export</button>\n\t\t\t\t\t\t\t<button class="btn btn-sm btn-outline-secondary w-50" id="DA57C571_E294_4D75_B36F_FF6BB066D504" onclick="schemaViewerApp.printSchema();">Print</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t\x3c!-- ******************************************************************************************************* --\x3e\n\n\t</div>\n\t<div class="col-md-9">\n\n\t\t\x3c!-- ******************************************************************************************************* --\x3e\n\n\t\t<div id="C6DDFAF6_9E75_41C5_87BD_0896B5299559"></div>\n\n\t\t\x3c!-- ******************************************************************************************************* --\x3e\n\n\t</div>\n</div>\n',{dict:{command:t}}).done((()=>{const a=document.getElementById("EFAEDA1C_C8B2_46EA_AC47_A591A0704FE3");a.addEventListener("dragover",this.handleDragOver.bind(this),!1),a.addEventListener("drop",this.handleDrop.bind(this),!1),$("#C6DDFAF6_9E75_41C5_87BD_0896B5299559").outerHeight($(document).height()-$("#C6DDFAF6_9E75_41C5_87BD_0896B5299559").offset().top-8),(this.schema=new n[0]).render("#C6DDFAF6_9E75_41C5_87BD_0896B5299559",{onFocus:t=>{t&&void 0!==t.getColor&&$("#F542C5DA_46FD_6A57_76CB_9A6A949E7F39").val(t.getColor())},onBlur:()=>{$("#F542C5DA_46FD_6A57_76CB_9A6A949E7F39").val("#0066CC")}}).done((()=>{$("#D015B3C1_B150_4E27_99D9_A628B3F9B0AC").change((()=>{this.defaultCatalog=$("#D015B3C1_B150_4E27_99D9_A628B3F9B0AC option:selected").val()})),this.defaultCatalog=t,e.resolve()}))}))})).fail((t=>{e.reject(t)})),e},onLogin:function(){const t=$.Deferred();return amiCommand.execute("ListCatalogs").done((e=>{const n=['<option value="" style="display: none;">Choose a catalog</option>'];$.each(amiWebApp.jspath('..field{.@name==="externalCatalog"}.$',e),((t,e)=>{e===this.defaultCatalog?n.push(`<option value="${amiWebApp.textToHtml(e)}" selected="selected">${amiWebApp.textToHtml(e)}</option>`):n.push(`<option value="${amiWebApp.textToHtml(e)}" xxxxxxxx="xxxxxxxx">${amiWebApp.textToHtml(e)}</option>`)})),this.openSchema().done((()=>{const e=!1===amiLogin.hasRole("AMI_ADMIN");$("#D015B3C1_B150_4E27_99D9_A628B3F9B0AC").html(n.join("")),$("#D015B3C1_B150_4E27_99D9_A628B3F9B0AC").prop("disabled",!1),$("#A9A20536_D366_4AFE_96E3_56E3FAF52179").prop("disabled",!1),$("#D342245F_B95E_4CAB_84C5_53B509C28319").prop("disabled",e),e?($("#D316F050_F66C_8D02_33A0_CFF920BEF817").hide(),$("#A20151B8_B578_A3F1_AF65_FB5AE59287E6").hide()):($("#D316F050_F66C_8D02_33A0_CFF920BEF817").show(),$("#A20151B8_B578_A3F1_AF65_FB5AE59287E6").show()),$("#F542C5DA_46FD_6A57_76CB_9A6A949E7F39").prop("disabled",e),$("#A8A2E848_F02A_40C7_8327_53F73B1B2BD6").prop("disabled",!1),$("#DA57C571_E294_4D75_B36F_FF6BB066D504").prop("disabled",!1),t.resolve()})).fail((e=>{t.reject(e)}))})).fail(((e,n)=>{t.reject(n)})),t},onLogout:function(){this.schema.clear(),$("#D015B3C1_B150_4E27_99D9_A628B3F9B0AC").empty(),$("#D015B3C1_B150_4E27_99D9_A628B3F9B0AC").prop("disabled",!0),$("#A9A20536_D366_4AFE_96E3_56E3FAF52179").prop("disabled",!0),$("#D342245F_B95E_4CAB_84C5_53B509C28319").prop("disabled",!0),$("#D316F050_F66C_8D02_33A0_CFF920BEF817").hide(),$("#A20151B8_B578_A3F1_AF65_FB5AE59287E6").hide(),$("#F542C5DA_46FD_6A57_76CB_9A6A949E7F39").prop("disabled",!0),$("#A8A2E848_F02A_40C7_8327_53F73B1B2BD6").prop("disabled",!0),$("#DA57C571_E294_4D75_B36F_FF6BB066D504").prop("disabled",!0)},handleDragOver:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleDrop:function(t){t.stopPropagation(),t.preventDefault();const e=t.dataTransfer.files;for(let t,n=0;t=e[n];n++){const e=new FileReader;e.onload=t=>{try{this.schema.setJSON(JSON.parse(t.target.result))}catch(t){amiWebApp.error(t,!0)}},e.readAsText(t)}},openSchema:function(){return amiWebApp.lock(),this.schema.refresh(this.defaultCatalog,{showShowTool:!0,showEditTool:amiLogin.hasRole("AMI_ADMIN")}).done((()=>{window.history.pushState("","",`${amiWebApp.webAppURL}?subapp=schemaViewer${this.defaultCatalog?`&userdata=${encodeURIComponent(this.defaultCatalog)}`:""}`),amiWebApp.unlock()})).fail((t=>{amiWebApp.error(t,!0)}))},saveSchema:function(){if(!this.defaultCatalog)return;const t=this.schema.exportPositionsAndColors();!1===jQuery.isEmptyObject(t)&&(amiWebApp.lock(),amiCommand.execute("SetJSONSchema -catalog=? -json=?",{params:[this.defaultCatalog,JSON.stringify(t)]}).done(((t,e)=>{amiWebApp.success(e,!0)})).fail(((t,e)=>{amiWebApp.error(e,!0)})))},flushServerCachesFast:function(){confirm("Please confirm...")&&(amiWebApp.lock(),amiCommand.execute("FlushServerCaches").done(((t,e)=>{amiWebApp.success(e,!0)})).fail(((t,e)=>{amiWebApp.error(e,!0)})))},flushServerCachesSlow:function(){confirm("Please confirm...")&&(amiWebApp.lock(),amiCommand.execute("FlushServerCaches -full").done(((t,e)=>{amiWebApp.success(e,!0)})).fail(((t,e)=>{amiWebApp.error(e,!0)})))},setBoxColor:function(t){const e=this.schema.getCurrentCell();e&&e.setColor(t)},exportSchema:function(){this.schema.exportSchema()},printSchema:function(){this.schema.printSchema()}}),window.schemaViewerApp=new SchemaViewerApp})()})();