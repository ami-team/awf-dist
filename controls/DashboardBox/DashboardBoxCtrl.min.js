(()=>{"use strict";$AMIClass("DashboardBoxCtrl",{$extends:ami.Control,$init:function(t,e){this.$super.$init(t,e)},onReady:function(){const t=$.Deferred();return amiWebApp.appendHTML("body",'<div class="modal fade" data-backdrop="static" role="dialog" id="C5E27E1F_DEB1_DE92_1301_898529832194">\n\t<div class="modal-dialog modal-xl" role="document">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header">\n\t\t\t\t<h4 class="modal-title"><i class="bi bi-speedometer"></i> Append to Dashboard</h4>\n\t\t\t\t{% if BOOTSTRAP_VERSION > 4 %}\n\t\t\t\t<button type="button" class="btn-close" data-bs-dismiss="modal"></button>\n\t\t\t\t{% else %}\n\t\t\t\t<button type="button" class="close" data-dismiss="modal"><i class="bi bi-x-lg"></i></button>\n\t\t\t\t{% endif %}\n\t\t\t</div>\n\t\t\t<div class="modal-body">\n\t\t\t\t<div class="mb-2">\n\t\t\t\t\t<label class="form-label" for="CA1C2B9C_C66E_16A4_0192_95704C27B6E2">Existing or new dashboard name<sup class="text-danger">*</sup></label>\n\t\t\t\t\t<select class="form-select form-select-sm" id="CA1C2B9C_C66E_16A4_0192_95704C27B6E2"></select>\n\t\t\t\t</div>\n\t\t\t\t<div class="mb-2">\n\t\t\t\t\t<label class="form-label" for="A7003C5D_0A5C_08A2_DAD9_3EC577328D43">JSON <button class="btn btn-sm btn-primary" data-bs-toggle="collapse" data-bs-target="#CC011903_7C42_70CF_25CD_DE594C3E23C5">view/hide</button></label>\n\t\t\t\t\t<div class="collapse show" id="CC011903_7C42_70CF_25CD_DE594C3E23C5">\n\t\t\t\t\t\t<textarea class="form-editor" data-lang="json" id="A7003C5D_0A5C_08A2_DAD9_3EC577328D43"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<label class="form-label" for="DDC88FB6_C193_9C60_53CE_85D885BD42F7">Transparent widget<sub class="text-danger">*</sub></label>\n\t\t\t\t\t\t<div class="switch switch-sm switch-off-primary switch-on-success">\n\t\t\t\t\t\t\t<input type="checkbox" id="DDC88FB6_C193_9C60_53CE_85D885BD42F7">\n\t\t\t\t\t\t\t<label for="DDC88FB6_C193_9C60_53CE_85D885BD42F7">\n\t\t\t\t\t\t\t\t<span class="text-primary">no</span>\n\t\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t\t<span class="text-success">yes</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-md-6">\n\t\t\t\t\t\t<label class="form-label" for="BFE60B45_EB7C_E9AD_8748_9894FB5FBC35">Auto refresh widget<sub class="text-danger">*</sub></label>\n\t\t\t\t\t\t<div class="switch switch-sm switch-off-primary switch-on-success">\n\t\t\t\t\t\t\t<input type="checkbox" id="BFE60B45_EB7C_E9AD_8748_9894FB5FBC35">\n\t\t\t\t\t\t\t<label for="BFE60B45_EB7C_E9AD_8748_9894FB5FBC35">\n\t\t\t\t\t\t\t\t<span class="text-primary">no</span>\n\t\t\t\t\t\t\t\t/\n\t\t\t\t\t\t\t\t<span class="text-success">yes</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="modal-footer">\n\t\t\t\t<button type="button" class="btn btn-outline-secondary" id="D5C96872_D545_4B33_ECD9_55EC32E1703E">Close</button>\n\t\t\t\t-\n\t\t\t\t<button type="button" class="btn btn-success" id="E335D6CC_ADA1_92CF_1C64_F446B27B5F93">Add Widget</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n').done(()=>{const e=this.$class;$("#CA1C2B9C_C66E_16A4_0192_95704C27B6E2").select2({tags:!0,allowClear:!0,placeholder:"Existing or new dashboard name",dropdownParent:$("#C5E27E1F_DEB1_DE92_1301_898529832194 .modal-body")}),$("#D5C96872_D545_4B33_ECD9_55EC32E1703E").on("click",()=>{amiWebApp.modalLeave(),amiWebApp.modalLeave(),$("#C5E27E1F_DEB1_DE92_1301_898529832194").modal("hide"),e.deferred.resolveWith(e.context||e.deferred,[null])}),$("#E335D6CC_ADA1_92CF_1C64_F446B27B5F93").on("click",()=>{const t=$("#CA1C2B9C_C66E_16A4_0192_95704C27B6E2").val().trim(),s=$("#DDC88FB6_C193_9C60_53CE_85D885BD42F7").prop("checked")?"1":"0",a=$("#BFE60B45_EB7C_E9AD_8748_9894FB5FBC35").prop("checked")?"1":"0",n=$("#A7003C5D_0A5C_08A2_DAD9_3EC577328D43").val().trim();t&&n&&(amiWebApp.lock(),amiCommand.execute("AddDashboardWidget -hash=? -transparent=? -autoRefresh=? -json=?",{params:[t,s,a,n]}).done(()=>{amiLogin.update().always(()=>{amiWebApp.unlock(),amiWebApp.modalLeave(),$("#C5E27E1F_DEB1_DE92_1301_898529832194").modal("hide"),e.deferred.rejectWith(e.context||e.deferred,[name])})}).fail((t,e)=>{amiWebApp.error(e,!0)}))}),t.resolve()}),t},render:function(t,e){const s=$.Deferred(),[a,n]=amiWebApp.setup(["context","hash"],[s,""],e);let l;try{l="Object"===amiWebApp.typeOf(t)?t:JSON.parse(t)}catch(t){l={}}const o=$("#CA1C2B9C_C66E_16A4_0192_95704C27B6E2").empty();return $.each(Object.values(amiAuth.getDashboardInfo()),(t,e)=>{o.append(new Option(e.name,e.hash))}),$("#CA1C2B9C_C66E_16A4_0192_95704C27B6E2").val(n||""),$("#A7003C5D_0A5C_08A2_DAD9_3EC577328D43").val(JSON.stringify(l,null,2)||"{}"),$("#CC011903_7C42_70CF_25CD_DE594C3E23C5").collapse("show"),$("#C5E27E1F_DEB1_DE92_1301_898529832194").modal("show"),this.$class.deferred=s,this.$class.context=a,amiWebApp.modalEnter(),s.promise()},show:function(t,e){return this.render(t,e)}})})();