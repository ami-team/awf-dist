(()=>{var t={540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},1113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},1669:t=>{"use strict";t.exports=jQuery},4034:function(t,e,i){var a,n,s;s=this,a=[i(8123),i(1669)],void 0===(n=function(t,e){return e.fn||(e.fn={}),s.daterangepicker=function(t,e){var i=function(i,a,n){if(this.parentEl="body",this.element=e(i),this.startDate=t().startOf("day"),this.endDate=t().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.showISOWeekNumbers=!1,this.showCustomRangeLabel=!0,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.alwaysShowCalendars=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={direction:"ltr",format:t.localeData().longDateFormat("L"),separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:t.weekdaysMin(),monthNames:t.monthsShort(),firstDay:t.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof a&&null!==a||(a={}),"string"==typeof(a=e.extend(this.element.data(),a)).template||a.template instanceof e||(a.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_start" value="" /><i class="bi bi-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="bi bi-clock glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini form-control" type="text" name="daterangepicker_end" value="" /><i class="bi bi-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="bi bi-clock glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=a.parentEl&&e(a.parentEl).length?e(a.parentEl):e(this.parentEl),this.container=e(a.template).appendTo(this.parentEl),"object"==typeof a.locale&&("string"==typeof a.locale.direction&&(this.locale.direction=a.locale.direction),"string"==typeof a.locale.format&&(this.locale.format=a.locale.format),"string"==typeof a.locale.separator&&(this.locale.separator=a.locale.separator),"object"==typeof a.locale.daysOfWeek&&(this.locale.daysOfWeek=a.locale.daysOfWeek.slice()),"object"==typeof a.locale.monthNames&&(this.locale.monthNames=a.locale.monthNames.slice()),"number"==typeof a.locale.firstDay&&(this.locale.firstDay=a.locale.firstDay),"string"==typeof a.locale.applyLabel&&(this.locale.applyLabel=a.locale.applyLabel),"string"==typeof a.locale.cancelLabel&&(this.locale.cancelLabel=a.locale.cancelLabel),"string"==typeof a.locale.weekLabel&&(this.locale.weekLabel=a.locale.weekLabel),"string"==typeof a.locale.customRangeLabel)){(p=document.createElement("textarea")).innerHTML=a.locale.customRangeLabel;var s=p.value;this.locale.customRangeLabel=s}if(this.container.addClass(this.locale.direction),"string"==typeof a.startDate&&(this.startDate=t(a.startDate,this.locale.format)),"string"==typeof a.endDate&&(this.endDate=t(a.endDate,this.locale.format)),"string"==typeof a.minDate&&(this.minDate=t(a.minDate,this.locale.format)),"string"==typeof a.maxDate&&(this.maxDate=t(a.maxDate,this.locale.format)),"object"==typeof a.startDate&&(this.startDate=t(a.startDate)),"object"==typeof a.endDate&&(this.endDate=t(a.endDate)),"object"==typeof a.minDate&&(this.minDate=t(a.minDate)),"object"==typeof a.maxDate&&(this.maxDate=t(a.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof a.applyClass&&(this.applyClass=a.applyClass),"string"==typeof a.cancelClass&&(this.cancelClass=a.cancelClass),"object"==typeof a.dateLimit&&(this.dateLimit=a.dateLimit),"string"==typeof a.opens&&(this.opens=a.opens),"string"==typeof a.drops&&(this.drops=a.drops),"boolean"==typeof a.showWeekNumbers&&(this.showWeekNumbers=a.showWeekNumbers),"boolean"==typeof a.showISOWeekNumbers&&(this.showISOWeekNumbers=a.showISOWeekNumbers),"string"==typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses),"object"==typeof a.buttonClasses&&(this.buttonClasses=a.buttonClasses.join(" ")),"boolean"==typeof a.showDropdowns&&(this.showDropdowns=a.showDropdowns),"boolean"==typeof a.showCustomRangeLabel&&(this.showCustomRangeLabel=a.showCustomRangeLabel),"boolean"==typeof a.singleDatePicker&&(this.singleDatePicker=a.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof a.timePicker&&(this.timePicker=a.timePicker),"boolean"==typeof a.timePickerSeconds&&(this.timePickerSeconds=a.timePickerSeconds),"number"==typeof a.timePickerIncrement&&(this.timePickerIncrement=a.timePickerIncrement),"boolean"==typeof a.timePicker24Hour&&(this.timePicker24Hour=a.timePicker24Hour),"boolean"==typeof a.autoApply&&(this.autoApply=a.autoApply),"boolean"==typeof a.autoUpdateInput&&(this.autoUpdateInput=a.autoUpdateInput),"boolean"==typeof a.linkedCalendars&&(this.linkedCalendars=a.linkedCalendars),"function"==typeof a.isInvalidDate&&(this.isInvalidDate=a.isInvalidDate),"function"==typeof a.isCustomDate&&(this.isCustomDate=a.isCustomDate),"boolean"==typeof a.alwaysShowCalendars&&(this.alwaysShowCalendars=a.alwaysShowCalendars),0!=this.locale.firstDay)for(var r=this.locale.firstDay;r>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),r--;var l,o,c;if(void 0===a.startDate&&void 0===a.endDate&&e(this.element).is("input[type=text]")){var d=e(this.element).val(),h=d.split(this.locale.separator);l=o=null,2==h.length?(l=t(h[0],this.locale.format),o=t(h[1],this.locale.format)):this.singleDatePicker&&""!==d&&(l=t(d,this.locale.format),o=t(d,this.locale.format)),null!==l&&null!==o&&(this.setStartDate(l),this.setEndDate(o))}if("object"==typeof a.ranges){for(c in a.ranges){l="string"==typeof a.ranges[c][0]?t(a.ranges[c][0],this.locale.format):t(a.ranges[c][0]),o="string"==typeof a.ranges[c][1]?t(a.ranges[c][1],this.locale.format):t(a.ranges[c][1]),this.minDate&&l.isBefore(this.minDate)&&(l=this.minDate.clone());var p,m=this.maxDate;if(this.dateLimit&&m&&l.clone().add(this.dateLimit).isAfter(m)&&(m=l.clone().add(this.dateLimit)),m&&o.isAfter(m)&&(o=m.clone()),!(this.minDate&&o.isBefore(this.minDate,this.timepicker?"minute":"day")||m&&l.isAfter(m,this.timepicker?"minute":"day")))(p=document.createElement("textarea")).innerHTML=c,s=p.value,this.ranges[s]=[l,o]}var u="<ul>";for(c in this.ranges)u+='<li data-range-key="'+c+'">'+c+"</li>";this.showCustomRangeLabel&&(u+='<li data-range-key="'+this.locale.customRangeLabel+'">'+this.locale.customRangeLabel+"</li>"),u+="</ul>",this.container.find(".ranges").prepend(u)}"function"==typeof n&&(this.callback=n),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof a.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input > i").hide(),this.timePicker?this.container.find(".ranges ul").hide():this.container.find(".ranges").hide()),(void 0===a.ranges&&!this.singleDatePicker||this.alwaysShowCalendars)&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==a.ranges&&"right"==this.opens&&this.container.find(".ranges").prependTo(this.container.find(".calendar.left").parent()),this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",e.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",e.proxy(this.clickNext,this)).on("mousedown.daterangepicker","td.available",e.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",e.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",e.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",e.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",e.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",e.proxy(this.showCalendars,this)).on("focus.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsFocused,this)).on("blur.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsBlurred,this)).on("change.daterangepicker",".daterangepicker_input input",e.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",e.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",e.proxy(this.clickCancel,this)).on("click.daterangepicker","li",e.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",e.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",e.proxy(this.updateFormInputs,this)),this.element.is("input")||this.element.is("button")?this.element.on({"click.daterangepicker":e.proxy(this.show,this),"focus.daterangepicker":e.proxy(this.show,this),"keyup.daterangepicker":e.proxy(this.elementChanged,this),"keydown.daterangepicker":e.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",e.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return i.prototype={constructor:i,setStartDate:function(e){"string"==typeof e&&(this.startDate=t(e,this.locale.format)),"object"==typeof e&&(this.startDate=t(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate.clone(),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.floor(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement)),this.updateMonthsInView()},setEndDate:function(e){"string"==typeof e&&(this.endDate=t(e,this.locale.format)),"object"==typeof e&&(this.endDate=t(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.previousRightTime=this.endDate.clone(),this.updateMonthsInView()},isInvalidDate:function(){return!1},isCustomDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"));this.maxDate&&this.linkedCalendars&&!this.singleDatePicker&&this.rightCalendar.month>this.maxDate&&(this.rightCalendar.month=this.maxDate.clone().date(2),this.leftCalendar.month=this.maxDate.clone().date(2).subtract(1,"month"))},updateCalendars:function(){var t,e,i,a;this.timePicker&&(this.endDate?(t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),i=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(a=this.container.find(".left .ampmselect").val())&&t<12&&(t+=12),"AM"===a&&12===t&&(t=0))):(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),i=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(a=this.container.find(".right .ampmselect").val())&&t<12&&(t+=12),"AM"===a&&12===t&&(t=0))),this.leftCalendar.month.hour(t).minute(e).second(i),this.rightCalendar.month.hour(t).minute(e).second(i));this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate&&this.calculateChosenLabel()},renderCalendar:function(i){var a,n=(a="left"==i?this.leftCalendar:this.rightCalendar).month.month(),s=a.month.year(),r=a.month.hour(),l=a.month.minute(),o=a.month.second(),c=t([s,n]).daysInMonth(),d=t([s,n,1]),h=t([s,n,c]),p=t(d).subtract(1,"month").month(),m=t(d).subtract(1,"month").year(),u=t([m,p]).daysInMonth(),f=d.day();(a=[]).firstDay=d,a.lastDay=h;for(var g=0;g<6;g++)a[g]=[];var x=u-f+this.locale.firstDay+1;x>u&&(x-=7),f==this.locale.firstDay&&(x=u-6);for(var b=t([m,p,x,12,l,o]),$=(g=0,0),y=0;g<42;g++,$++,b=t(b).add(24,"hour"))g>0&&$%7==0&&($=0,y++),a[y][$]=b.clone().hour(r).minute(l).second(o),b.hour(12),this.minDate&&a[y][$].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&a[y][$].isBefore(this.minDate)&&"left"==i&&(a[y][$]=this.minDate.clone()),this.maxDate&&a[y][$].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&a[y][$].isAfter(this.maxDate)&&"right"==i&&(a[y][$]=this.maxDate.clone());"left"==i?this.leftCalendar.calendar=a:this.rightCalendar.calendar=a;var v="left"==i?this.minDate:this.startDate,k=this.maxDate,D=("left"==i?this.startDate:this.endDate,"ltr"==this.locale.direction?{left:"chevron-left",right:"chevron-right"}:{left:"chevron-right",right:"chevron-left"}),C='<table class="table-condensed">';C+="<thead>",C+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(C+="<th></th>"),v&&!v.isBefore(a.firstDay)||this.linkedCalendars&&"left"!=i?C+="<th></th>":C+='<th class="prev available"><i class="bi bi-'+D.left+" glyphicon glyphicon-"+D.left+'"></i></th>';var A=this.locale.monthNames[a[1][1].month()]+a[1][1].format(" YYYY");if(this.showDropdowns){for(var _=a[1][1].month(),E=a[1][1].year(),S=k&&k.year()||E+5,w=v&&v.year()||E-50,T=E==w,B=E==S,L='<select class="monthselect">',O=0;O<12;O++)(!T||O>=v.month())&&(!B||O<=k.month())?L+="<option value='"+O+"'"+(O===_?" selected='selected'":"")+">"+this.locale.monthNames[O]+"</option>":L+="<option value='"+O+"'"+(O===_?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[O]+"</option>";L+="</select>";for(var I='<select class="yearselect">',P=w;P<=S;P++)I+='<option value="'+P+'"'+(P===E?' selected="selected"':"")+">"+P+"</option>";A=L+(I+="</select>")}if(C+='<th colspan="5" class="month">'+A+"</th>",k&&!k.isAfter(a.lastDay)||this.linkedCalendars&&"right"!=i&&!this.singleDatePicker?C+="<th></th>":C+='<th class="next available"><i class="bi bi-'+D.right+" glyphicon glyphicon-"+D.right+'"></i></th>',C+="</tr>",C+="<tr>",(this.showWeekNumbers||this.showISOWeekNumbers)&&(C+='<th class="week">'+this.locale.weekLabel+"</th>"),e.each(this.locale.daysOfWeek,function(t,e){C+="<th>"+e+"</th>"}),C+="</tr>",C+="</thead>",C+="<tbody>",null==this.endDate&&this.dateLimit){var W=this.startDate.clone().add(this.dateLimit).endOf("day");k&&!W.isBefore(k)||(k=W)}for(y=0;y<6;y++){for(C+="<tr>",this.showWeekNumbers?C+='<td class="week">'+a[y][0].week()+"</td>":this.showISOWeekNumbers&&(C+='<td class="week">'+a[y][0].isoWeek()+"</td>"),$=0;$<7;$++){var F=[];a[y][$].isSame(new Date,"day")&&F.push("today"),a[y][$].isoWeekday()>5&&F.push("weekend"),a[y][$].month()!=a[1][1].month()&&F.push("off"),this.minDate&&a[y][$].isBefore(this.minDate,"day")&&F.push("off","disabled"),k&&a[y][$].isAfter(k,"day")&&F.push("off","disabled"),this.isInvalidDate(a[y][$])&&F.push("off","disabled"),a[y][$].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&F.push("active","start-date"),null!=this.endDate&&a[y][$].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&F.push("active","end-date"),null!=this.endDate&&a[y][$]>this.startDate&&a[y][$]<this.endDate&&F.push("in-range");var R=this.isCustomDate(a[y][$]);!1!==R&&("string"==typeof R?F.push(R):Array.prototype.push.apply(F,R));var N="",M=!1;for(g=0;g<F.length;g++)N+=F[g]+" ","disabled"==F[g]&&(M=!0);M||(N+="available"),C+='<td class="'+N.replace(/^\s+|\s+$/g,"")+'" data-title="r'+y+"c"+$+'">'+a[y][$].date()+"</td>"}C+="</tr>"}C+="</tbody>",C+="</table>",this.container.find(".calendar."+i+" .calendar-table").html(C)},renderTimePicker:function(t){if("right"!=t||this.endDate){var e,i,a,n=this.maxDate;if(!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(n=this.startDate.clone().add(this.dateLimit)),"left"==t)i=this.startDate.clone(),a=this.minDate;else if("right"==t){i=this.endDate.clone(),a=this.startDate;var s=this.container.find(".calendar.right .calendar-time div");if(""!=s.html()&&(i.hour(s.find(".hourselect option:selected").val()||i.hour()),i.minute(s.find(".minuteselect option:selected").val()||i.minute()),i.second(s.find(".secondselect option:selected").val()||i.second()),!this.timePicker24Hour)){var r=s.find(".ampmselect option:selected").val();"PM"===r&&i.hour()<12&&i.hour(i.hour()+12),"AM"===r&&12===i.hour()&&i.hour(0)}i.isBefore(this.startDate)&&(i=this.startDate.clone()),n&&i.isAfter(n)&&(i=n.clone())}e='<select class="hourselect">';for(var l=this.timePicker24Hour?0:1,o=this.timePicker24Hour?23:12,c=l;c<=o;c++){var d=c;this.timePicker24Hour||(d=i.hour()>=12?12==c?12:c+12:12==c?0:c);var h=i.clone().hour(d),p=!1;a&&h.minute(59).isBefore(a)&&(p=!0),n&&h.minute(0).isAfter(n)&&(p=!0),d!=i.hour()||p?e+=p?'<option value="'+c+'" disabled="disabled" class="disabled">'+c+"</option>":'<option value="'+c+'">'+c+"</option>":e+='<option value="'+c+'" selected="selected">'+c+"</option>"}for(e+="</select> ",e+=': <select class="minuteselect">',c=0;c<60;c+=this.timePickerIncrement){var m=c<10?"0"+c:c;h=i.clone().minute(c),p=!1,a&&h.second(59).isBefore(a)&&(p=!0),n&&h.second(0).isAfter(n)&&(p=!0),i.minute()!=c||p?e+=p?'<option value="'+c+'" disabled="disabled" class="disabled">'+m+"</option>":'<option value="'+c+'">'+m+"</option>":e+='<option value="'+c+'" selected="selected">'+m+"</option>"}if(e+="</select> ",this.timePickerSeconds){for(e+=': <select class="secondselect">',c=0;c<60;c++)m=c<10?"0"+c:c,h=i.clone().second(c),p=!1,a&&h.isBefore(a)&&(p=!0),n&&h.isAfter(n)&&(p=!0),i.second()!=c||p?e+=p?'<option value="'+c+'" disabled="disabled" class="disabled">'+m+"</option>":'<option value="'+c+'">'+m+"</option>":e+='<option value="'+c+'" selected="selected">'+m+"</option>";e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var u="",f="";a&&i.clone().hour(12).minute(0).second(0).isBefore(a)&&(u=' disabled="disabled" class="disabled"'),n&&i.clone().hour(0).minute(0).second(0).isAfter(n)&&(f=' disabled="disabled" class="disabled"'),i.hour()>=12?e+='<option value="AM"'+u+'>AM</option><option value="PM" selected="selected"'+f+">PM</option>":e+='<option value="AM" selected="selected"'+u+'>AM</option><option value="PM"'+f+">PM</option>",e+="</select>"}this.container.find(".calendar."+t+" .calendar-time div").html(e)}},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var t,i={top:0,left:0},a=e(window).width();this.parentEl.is("body")||(i={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},a=this.parentEl[0].clientWidth+this.parentEl.offset().left),t="up"==this.drops?this.element.offset().top-this.container.outerHeight()-i.top:this.element.offset().top+this.element.outerHeight()-i.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:t,right:a-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:t,left:this.element.offset().left-i.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:t,left:this.element.offset().left-i.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>e(window).width()&&this.container.css({left:"auto",right:0}))},show:function(t){this.isShowing||(this._outsideClickProxy=e.proxy(function(t){this.outsideClick(t)},this),e(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),e(window).on("resize.daterangepicker",e.proxy(function(t){this.move(t)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.previousRightTime=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},hideUpdate:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),e(document).off(".daterangepicker"),e(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var i=e(t.target);"focusin"==t.type||i.closest(this.element).length||i.closest(this.container).length||i.closest(".calendar-table").length||(this.hide(),this.element.trigger("outsideClick.daterangepicker",this))},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(t){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var e=t.target.getAttribute("data-range-key");if(e==this.locale.customRangeLabel)this.updateView();else{var i=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(i[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(i[1].format(this.locale.format))}}},clickRange:function(t){var e=t.target.getAttribute("data-range-key");if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var i=this.ranges[e];this.startDate=i[0],this.endDate=i[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.alwaysShowCalendars||this.hideCalendars(),this.clickApply()}},clickPrev:function(t){e(t.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){e(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(e(t.target).hasClass("available")){var i=e(t.target).attr("data-title"),a=i.substr(1,1),n=i.substr(3,1),s=e(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[a][n]:this.rightCalendar.calendar[a][n];this.endDate&&!this.container.find("input[name=daterangepicker_start]").is(":focus")?this.container.find("input[name=daterangepicker_start]").val(s.format(this.locale.format)):this.endDate||this.container.find("input[name=daterangepicker_end]").is(":focus")||this.container.find("input[name=daterangepicker_end]").val(s.format(this.locale.format));var r=this.leftCalendar,l=this.rightCalendar,o=this.startDate;this.endDate||this.container.find(".calendar tbody td").each(function(t,i){if(!e(i).hasClass("week")){var a=e(i).attr("data-title"),n=a.substr(1,1),c=a.substr(3,1),d=e(i).parents(".calendar").hasClass("left")?r.calendar[n][c]:l.calendar[n][c];d.isAfter(o)&&d.isBefore(s)||d.isSame(s,"day")?e(i).addClass("in-range"):e(i).removeClass("in-range")}})}},clickDate:function(t){if(e(t.target).hasClass("available")){var i=e(t.target).attr("data-title"),a=i.substr(1,1),n=i.substr(3,1),s=e(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[a][n]:this.rightCalendar.calendar[a][n];if(this.endDate||s.isBefore(this.startDate,"day")){if(this.timePicker){var r=parseInt(this.container.find(".left .hourselect").val(),10);this.timePicker24Hour||("PM"===(c=this.container.find(".left .ampmselect").val())&&r<12&&(r+=12),"AM"===c&&12===r&&(r=0));var l=parseInt(this.container.find(".left .minuteselect").val(),10),o=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;s=s.clone().hour(r).minute(l).second(o)}this.endDate=null,this.setStartDate(s.clone())}else if(!this.endDate&&s.isBefore(this.startDate))this.setEndDate(this.startDate.clone());else{var c;if(this.timePicker)r=parseInt(this.container.find(".right .hourselect").val(),10),this.timePicker24Hour||("PM"===(c=this.container.find(".right .ampmselect").val())&&r<12&&(r+=12),"AM"===c&&12===r&&(r=0)),l=parseInt(this.container.find(".right .minuteselect").val(),10),o=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,s=s.clone().hour(r).minute(l).second(o);this.setEndDate(s.clone()),this.autoApply&&(this.calculateChosenLabel(),this.clickApply())}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView(),t.stopPropagation()}},calculateChosenLabel:function(){var t=!0,e=0;for(var i in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[i][0])&&this.endDate.isSame(this.ranges[i][1])){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[i][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[i][1].format("YYYY-MM-DD")){t=!1,this.chosenLabel=this.container.find(".ranges li:eq("+e+")").addClass("active").html();break}e++}t&&(this.showCustomRangeLabel?this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html():this.chosenLabel=null,this.showCalendars())},clickApply:function(t){this.hideUpdate(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var i=e(t.target).closest(".calendar").hasClass("left"),a=i?"left":"right",n=this.container.find(".calendar."+a),s=parseInt(n.find(".monthselect").val(),10),r=n.find(".yearselect").val();i||(r<this.startDate.year()||r==this.startDate.year()&&s<this.startDate.month())&&(s=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&s<this.minDate.month())&&(s=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&s>this.maxDate.month())&&(s=this.maxDate.month(),r=this.maxDate.year()),i?(this.leftCalendar.month.month(s).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(s).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var i=e(t.target).closest(".calendar"),a=i.hasClass("left"),n=parseInt(i.find(".hourselect").val(),10),s=parseInt(i.find(".minuteselect").val(),10),r=this.timePickerSeconds?parseInt(i.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var l=i.find(".ampmselect").val();"PM"===l&&n<12&&(n+=12),"AM"===l&&12===n&&(n=0)}if(a){var o=this.startDate.clone();o.hour(n),o.minute(s),o.second(r),this.setStartDate(o),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==o.format("YYYY-MM-DD")&&this.endDate.isBefore(o)&&this.setEndDate(o.clone())}else if(this.endDate){var c=this.endDate.clone();c.hour(n),c.minute(s),c.second(r),this.setEndDate(c)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(i){var a=e(i.target).closest(".calendar").hasClass("right"),n=t(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),s=t(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);n.isValid()&&s.isValid()&&(a&&s.isBefore(n)&&(n=s.clone()),this.setStartDate(n),this.setEndDate(s),a?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateView()},formInputsFocused:function(t){this.container.find('input[name="daterangepicker_start"], input[name="daterangepicker_end"]').removeClass("active"),e(t.target).addClass("active"),e(t.target).closest(".calendar").hasClass("right")&&(this.endDate=null,this.setStartDate(this.startDate.clone()),this.updateView())},formInputsBlurred:function(e){if(!this.endDate){var i=this.container.find('input[name="daterangepicker_end"]').val(),a=t(i,this.locale.format);a.isValid()&&(this.setEndDate(a),this.updateView())}},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var e=this.element.val().split(this.locale.separator),i=null,a=null;2===e.length&&(i=t(e[0],this.locale.format),a=t(e[1],this.locale.format)),(this.singleDatePicker||null===i||null===a)&&(a=i=t(this.element.val(),this.locale.format)),i.isValid()&&a.isValid()&&(this.setStartDate(i),this.setEndDate(a),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},e.fn.daterangepicker=function(t,a){return this.each(function(){var n=e(this);n.data("daterangepicker")&&n.data("daterangepicker").remove(),n.data("daterangepicker",new i(n,t,a))}),this},i}(t,e)}.apply(e,a))||(t.exports=n)},5056:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},5072:t=>{"use strict";var e=[];function i(t){for(var i=-1,a=0;a<e.length;a++)if(e[a].identifier===t){i=a;break}return i}function a(t,a){for(var s={},r=[],l=0;l<t.length;l++){var o=t[l],c=a.base?o[0]+a.base:o[0],d=s[c]||0,h="".concat(c," ").concat(d);s[c]=d+1;var p=i(h),m={css:o[1],media:o[2],sourceMap:o[3],supports:o[4],layer:o[5]};if(-1!==p)e[p].references++,e[p].updater(m);else{var u=n(m,a);a.byIndex=l,e.splice(l,0,{identifier:h,updater:u,references:1})}r.push(h)}return r}function n(t,e){var i=e.domAPI(e);i.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var s=a(t=t||[],n=n||{});return function(t){t=t||[];for(var r=0;r<s.length;r++){var l=i(s[r]);e[l].references--}for(var o=a(t,n),c=0;c<s.length;c++){var d=i(s[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=o}}},7304:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var a=i(9547),n=i.n(a),s=i(8532),r=i.n(s)()(n());r.push([t.id,".daterangepicker {\n  position: absolute;\n  color: inherit;\n  background-color: #fff;\n  border-radius: 4px;\n  width: 278px;\n  padding: 4px;\n  margin-top: 1px;\n  top: 100px;\n  left: 20px;\n  /* Calendars */ }\n  .daterangepicker:before, .daterangepicker:after {\n    position: absolute;\n    display: inline-block;\n    border-bottom-color: rgba(0, 0, 0, 0.2);\n    content: ''; }\n  .daterangepicker:before {\n    top: -7px;\n    border-right: 7px solid transparent;\n    border-left: 7px solid transparent;\n    border-bottom: 7px solid #ccc; }\n  .daterangepicker:after {\n    top: -6px;\n    border-right: 6px solid transparent;\n    border-bottom: 6px solid #fff;\n    border-left: 6px solid transparent; }\n  .daterangepicker.opensleft:before {\n    right: 9px; }\n  .daterangepicker.opensleft:after {\n    right: 10px; }\n  .daterangepicker.openscenter:before {\n    left: 0;\n    right: 0;\n    width: 0;\n    margin-left: auto;\n    margin-right: auto; }\n  .daterangepicker.openscenter:after {\n    left: 0;\n    right: 0;\n    width: 0;\n    margin-left: auto;\n    margin-right: auto; }\n  .daterangepicker.opensright:before {\n    left: 9px; }\n  .daterangepicker.opensright:after {\n    left: 10px; }\n  .daterangepicker.dropup {\n    margin-top: -5px; }\n    .daterangepicker.dropup:before {\n      top: initial;\n      bottom: -7px;\n      border-bottom: initial;\n      border-top: 7px solid #ccc; }\n    .daterangepicker.dropup:after {\n      top: initial;\n      bottom: -6px;\n      border-bottom: initial;\n      border-top: 6px solid #fff; }\n  .daterangepicker.dropdown-menu {\n    max-width: none;\n    z-index: 3001; }\n  .daterangepicker.single .ranges, .daterangepicker.single .calendar {\n    float: none; }\n  .daterangepicker.show-calendar .calendar {\n    display: block; }\n  .daterangepicker .calendar {\n    display: none;\n    max-width: 270px;\n    margin: 4px; }\n    .daterangepicker .calendar.single .calendar-table {\n      border: none; }\n    .daterangepicker .calendar th, .daterangepicker .calendar td {\n      white-space: nowrap;\n      text-align: center;\n      min-width: 32px; }\n  .daterangepicker .calendar-table {\n    border: 1px solid #fff;\n    padding: 4px;\n    border-radius: 4px;\n    background-color: #fff; }\n  .daterangepicker table {\n    width: 100%;\n    margin: 0; }\n  .daterangepicker td, .daterangepicker th {\n    text-align: center;\n    width: 20px;\n    height: 20px;\n    border-radius: 4px;\n    border: 1px solid transparent;\n    white-space: nowrap;\n    cursor: pointer; }\n    .daterangepicker td.available:hover, .daterangepicker th.available:hover {\n      background-color: #eee;\n      border-color: transparent;\n      color: inherit; }\n    .daterangepicker td.week, .daterangepicker th.week {\n      font-size: 80%;\n      color: #ccc; }\n  .daterangepicker td.off, .daterangepicker td.off.in-range, .daterangepicker td.off.start-date, .daterangepicker td.off.end-date {\n    background-color: #fff;\n    border-color: transparent;\n    color: #999; }\n  .daterangepicker td.in-range {\n    background-color: #ebf4f8;\n    border-color: transparent;\n    color: #000;\n    border-radius: 0; }\n  .daterangepicker td.start-date {\n    border-radius: 4px 0 0 4px; }\n  .daterangepicker td.end-date {\n    border-radius: 0 4px 4px 0; }\n  .daterangepicker td.start-date.end-date {\n    border-radius: 4px; }\n  .daterangepicker td.active, .daterangepicker td.active:hover {\n    background-color: #357ebd;\n    border-color: transparent;\n    color: #fff; }\n  .daterangepicker th.month {\n    width: auto; }\n  .daterangepicker td.disabled, .daterangepicker option.disabled {\n    color: #999;\n    cursor: not-allowed;\n    text-decoration: line-through; }\n  .daterangepicker select.monthselect, .daterangepicker select.yearselect {\n    font-size: 12px;\n    padding: 1px;\n    height: auto;\n    margin: 0;\n    cursor: default; }\n  .daterangepicker select.monthselect {\n    margin-right: 2%;\n    width: 56%; }\n  .daterangepicker select.yearselect {\n    width: 40%; }\n  .daterangepicker select.hourselect, .daterangepicker select.minuteselect, .daterangepicker select.secondselect, .daterangepicker select.ampmselect {\n    width: 50px;\n    margin-bottom: 0; }\n  .daterangepicker .input-mini {\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    color: #555;\n    height: 30px;\n    line-height: 30px;\n    display: block;\n    vertical-align: middle;\n    margin: 0 0 5px 0;\n    padding: 0 6px 0 28px;\n    width: 100%; }\n    .daterangepicker .input-mini.active {\n      border: 1px solid #08c;\n      border-radius: 4px; }\n  .daterangepicker .daterangepicker_input {\n    position: relative; }\n    .daterangepicker .daterangepicker_input i {\n      position: absolute;\n      left: 8px;\n      top: 8px; }\n  .daterangepicker.rtl .input-mini {\n    padding-right: 28px;\n    padding-left: 6px; }\n  .daterangepicker.rtl .daterangepicker_input i {\n    left: auto;\n    right: 8px; }\n  .daterangepicker .calendar-time {\n    text-align: center;\n    margin: 5px auto;\n    line-height: 30px;\n    position: relative;\n    padding-left: 28px; }\n    .daterangepicker .calendar-time select.disabled {\n      color: #ccc;\n      cursor: not-allowed; }\n\n.ranges {\n  font-size: 11px;\n  float: none;\n  margin: 4px;\n  text-align: left; }\n  .ranges ul {\n    list-style: none;\n    margin: 0 auto;\n    padding: 0;\n    width: 100%; }\n  .ranges li {\n    font-size: 13px;\n    background-color: #f5f5f5;\n    border: 1px solid #f5f5f5;\n    border-radius: 4px;\n    color: #08c;\n    padding: 3px 12px;\n    margin-bottom: 8px;\n    cursor: pointer; }\n    .ranges li:hover {\n      background-color: #08c;\n      border: 1px solid #08c;\n      color: #fff; }\n    .ranges li.active {\n      background-color: #08c;\n      border: 1px solid #08c;\n      color: #fff; }\n\n/*  Larger Screen Styling */\n@media (min-width: 564px) {\n  .daterangepicker {\n    width: auto; }\n    .daterangepicker .ranges ul {\n      width: 160px; }\n    .daterangepicker.single .ranges ul {\n      width: 100%; }\n    .daterangepicker.single .calendar.left {\n      clear: none; }\n    .daterangepicker.single.ltr .ranges, .daterangepicker.single.ltr .calendar {\n      float: left; }\n    .daterangepicker.single.rtl .ranges, .daterangepicker.single.rtl .calendar {\n      float: right; }\n    .daterangepicker.ltr {\n      direction: ltr;\n      text-align: left; }\n      .daterangepicker.ltr .calendar.left {\n        clear: left;\n        margin-right: 0; }\n        .daterangepicker.ltr .calendar.left .calendar-table {\n          border-right: none;\n          border-top-right-radius: 0;\n          border-bottom-right-radius: 0; }\n      .daterangepicker.ltr .calendar.right {\n        margin-left: 0; }\n        .daterangepicker.ltr .calendar.right .calendar-table {\n          border-left: none;\n          border-top-left-radius: 0;\n          border-bottom-left-radius: 0; }\n      .daterangepicker.ltr .left .daterangepicker_input {\n        padding-right: 12px; }\n      .daterangepicker.ltr .calendar.left .calendar-table {\n        padding-right: 12px; }\n      .daterangepicker.ltr .ranges, .daterangepicker.ltr .calendar {\n        float: left; }\n    .daterangepicker.rtl {\n      direction: rtl;\n      text-align: right; }\n      .daterangepicker.rtl .calendar.left {\n        clear: right;\n        margin-left: 0; }\n        .daterangepicker.rtl .calendar.left .calendar-table {\n          border-left: none;\n          border-top-left-radius: 0;\n          border-bottom-left-radius: 0; }\n      .daterangepicker.rtl .calendar.right {\n        margin-right: 0; }\n        .daterangepicker.rtl .calendar.right .calendar-table {\n          border-right: none;\n          border-top-right-radius: 0;\n          border-bottom-right-radius: 0; }\n      .daterangepicker.rtl .left .daterangepicker_input {\n        padding-left: 12px; }\n      .daterangepicker.rtl .calendar.left .calendar-table {\n        padding-left: 12px; }\n      .daterangepicker.rtl .ranges, .daterangepicker.rtl .calendar {\n        text-align: right;\n        float: right; } }\n@media (min-width: 730px) {\n  .daterangepicker .ranges {\n    width: auto; }\n  .daterangepicker.ltr .ranges {\n    float: left; }\n  .daterangepicker.rtl .ranges {\n    float: right; }\n  .daterangepicker .calendar.left {\n    clear: none !important; } }\n",""]);const l=r},7659:t=>{"use strict";var e={};t.exports=function(t,i){var a=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(i)}},7825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var a="";i.supports&&(a+="@supports (".concat(i.supports,") {")),i.media&&(a+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(a+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),a+=i.css,n&&(a+="}"),i.media&&(a+="}"),i.supports&&(a+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(a,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},8123:t=>{"use strict";t.exports=moment},8532:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i="",a=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),a&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),a&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i}).join("")},e.i=function(t,i,a,n,s){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(a)for(var l=0;l<this.length;l++){var o=this[l][0];null!=o&&(r[o]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);a&&r[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),e.push(d))}},e}},9547:t=>{"use strict";t.exports=function(t){return t[1]}}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var s=e[a]={id:a,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{"use strict";var t=i(5072),e=i.n(t),a=i(7825),n=i.n(a),s=i(7659),r=i.n(s),l=i(5056),o=i.n(l),c=i(540),d=i.n(c),h=i(1113),p=i.n(h),m=i(7304),u={};u.styleTagTransform=p(),u.setAttributes=o(),u.insert=r().bind(null,"head"),u.domAPI=n(),u.insertStyleElement=d();e()(m.A,u);m.A&&m.A.locals&&m.A.locals;i(4034);$AMIClass("SearchCtrl",{$extends:ami.Control,$init:function(t,e){this.$super.$init(t,e)},onReady:function(){const t=$.Deferred();return amiWebApp.loadResources(["ctrl:tab"]).done(e=>{this.fragmentCriteriaBool='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body text-center" style="padding: 0.5rem;">\n\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t<input type="checkbox" id="ACC12068_1831_2272_F2EF_E6FC1125E1E4_Q{{cnt}}"{% if more.init_value[0] === more.on %} checked="checked"{% endif %} />\n\t\t\t<label for="ACC12068_1831_2272_F2EF_E6FC1125E1E4_Q{{cnt}}">\n\t\t\t\t<span class="text-secondary">{{ more.off_label | default(more.off | default(\'false\')) }}</span>\n\t\t\t\t/\n\t\t\t\t<span class="text-primary">{{ more.on_label | default(more.on | default(\'true\')) }}</span>\n\t\t\t</label>\n\t\t</span>\n\t</div>\n</div>\n',this.fragmentCriteriaDate='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input type="checkbox" class="switch-in" id="AC90DA3B-9AC6-61B5-2C17-FFD123BE5F0C_Q{{cnt}}" />\n\t\t\t\t<label for="AC90DA3B-9AC6-61B5-2C17-FFD123BE5F0C_Q{{cnt}}">\n\t\t\t\t\t<span class="text-secondary">in</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-primary">! in</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body" style="padding: 0.5rem;">\n\t\t<div class="row mb-2 align-items-center">\n\t\t\t<div class="col-2">\n\t\t\t\t<label for="C544B6D2_1760_FA8E_F86A_743863BEC84C_Q{{cnt}}">Min:</label>\n\t\t\t</div>\n\t\t\t<div class="col-10">\n\t\t\t\t<input type="text" class="form-control form-control-sm timedate min" id="C544B6D2_1760_FA8E_F86A_743863BEC84C_Q{{cnt}}" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row mb-2 align-items-center">\n\t\t\t<div class="col-2">\n\t\t\t\t<label for="E2792017_2A7E_FA9B_5DA0_7D820F85CBF8_Q{{cnt}}">Max:</label>\n\t\t\t</div>\n\t\t\t<div class="col-10">\n\t\t\t\t<input type="text" class="form-control form-control-sm timedate max" id="E2792017_2A7E_FA9B_5DA0_7D820F85CBF8_Q{{cnt}}" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row mb-2 align-items-center">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input type="checkbox" class="switch-null" id="E7CFE3F9_5A6C_87E0_673C_7685C2BD5F0B_Q{{cnt}}" />\n\t\t\t\t<label for="E7CFE3F9_5A6C_87E0_673C_7685C2BD5F0B_Q{{cnt}}">\n\t\t\t\t\t<span class="text-primary">IS NULL</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="text-{% if BOOTSTRAP_VERSION > 4 %}end{% else %}right{% endif %}">\n\t\t\t<a href="#" class="set">set</a> - <a href="#" class="reset">reset</a>\n\t\t</div>\n\t</div>\n</div>\n',this.fragmentCriteriaNumber='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input type="checkbox" class="switch-in" id="F85E166D-2527-752B-C6A2-C0222A41E4F1_Q{{cnt}}" />\n\t\t\t\t<label for="F85E166D-2527-752B-C6A2-C0222A41E4F1_Q{{cnt}}">\n\t\t\t\t\t<span class="text-secondary">in</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-primary">! in</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body" style="padding: 0.5rem;">\n\t\t<div class="row mb-2 align-items-center">\n\t\t\t<div class="col-2">\n\t\t\t\t<label for="AF5A97D2_E1E1_CED6_F4B0_31C1127CB96A_Q{{cnt}}">Min:</label>\n\t\t\t</div>\n\t\t\t<div class="col-10">\n\t\t\t\t<input type="number" step="any" class="form-control form-control-sm min" id="AF5A97D2_E1E1_CED6_F4B0_31C1127CB96A_Q{{cnt}}" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row mb-2 align-items-center">\n\t\t\t<div class="col-2">\n\t\t\t\t<label for="D653324C_887D_9766_B0C8_E9D5E5B7D8B4_Q{{cnt}}">Max:</label>\n\t\t\t</div>\n\t\t\t<div class="col-10">\n\t\t\t\t<input type="number" step="any" class="form-control form-control-sm max" id="D653324C_887D_9766_B0C8_E9D5E5B7D8B4_Q{{cnt}}" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="row mb-2 align-items-center">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input type="checkbox" class="switch-null" id="B65D131D_5D81_AAFC_8086_505E1728D4CB_Q{{cnt}}" />\n\t\t\t\t<label for="B65D131D_5D81_AAFC_8086_505E1728D4CB_Q{{cnt}}">\n\t\t\t\t\t<span class="text-primary">IS NULL</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="text-{% if BOOTSTRAP_VERSION > 4 %}end{% else %}right{% endif %}">\n\t\t\t<a href="#" class="set">set</a> - <a href="#" class="reset">reset</a>\n\t\t</div>\n\t</div>\n</div>\n',this.fragmentCriteriaParamFew='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t{% if isDefaultEntity !== true %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-andor" type="checkbox" id="C9B3B342_BDCF_BE03_A77C_432D749727C8_Q{{cnt}}" />\n\t\t\t\t<label for="C9B3B342_BDCF_BE03_A77C_432D749727C8_Q{{cnt}}">\n\t\t\t\t\t<span class="text-secondary">or</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-primary">and</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t{% endif %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-not" type="checkbox" id="F207D2E0_CB04_DAFF_603B_FA5FDE51FB8E_Q{{cnt}}" />\n\t\t\t\t<label for="F207D2E0_CB04_DAFF_603B_FA5FDE51FB8E_Q{{cnt}}">\n\t\t\t\t\t<span class="text-primary">not</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body" style="padding: 0.5rem;">\n\t\t<select class="{% if BOOTSTRAP_VERSION > 4 %}form-select form-select-sm{% else %}custom-select custom-select-sm{% endif %} form-control-sm key mb-2" style="font-size: 13px;"></select>\n\t\t<select class="form-control form-control-sm value" multiple="multiple" size="6" style="font-size: 13px;" disabled="disabled"></select>\n\t\t<div class="text-{% if BOOTSTRAP_VERSION > 4 %}end{% else %}right{% endif %}">\n\t\t\t#<span class="count">?</span>\n\t\t</div>\n\t\t<div class="input-group input-group-sm">\n\t\t\t<input type="text" class="form-control filter" placeholder="Filter, % for wildcarding" />\n\t\t\t{% if BOOTSTRAP_VERSION > 4 %}\n\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t{% else %}\n\t\t\t<div class="input-group-append">\n\t\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t</div>\n\t\t\t{% endif %}\n\t\t</div>\n\t</div>\n</div>\n',this.fragmentCriteriaParamMany='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t{% if isDefaultEntity !== true %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-andor" type="checkbox" id="E98BD984_8236_A227_4007_4AE0BC5397AC_Q{{cnt}}" />\n\t\t\t\t<label for="E98BD984_8236_A227_4007_4AE0BC5397AC_Q{{cnt}}">\n\t\t\t\t\t<span class="text-secondary">or</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-primary">and</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t{% endif %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-not" type="checkbox" id="C89CFB8E_E808_60F6_8EC1_91AA8E62A355_Q{{cnt}}" />\n\t\t\t\t<label for="C89CFB8E_E808_60F6_8EC1_91AA8E62A355_Q{{cnt}}">\n\t\t\t\t\t<span class="text-primary">not</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" type="button" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body" style="padding: 0.5rem;">\n\t\t<select class="{% if BOOTSTRAP_VERSION > 4 %}form-select form-select-sm{% else %}custom-select custom-select-sm{% endif %} form-control-sm key mb-2" style="font-size: 13px;"></select>\n\t\t<select class="form-control value" multiple="multiple" size="6" disabled="disabled" style="font-size: 13px;"></select>\n\t\t<div class="text-{% if BOOTSTRAP_VERSION > 4 %}end{% else %}right{% endif %}">\n\t\t\t#<span class="count">?</span>, limit: <span class="limit">?</span> <a href="#" class="show-less"><i class="bi bi-dash"></i></a>/<a href="#" class="show-more"><i class="bi bi-plus"></i></a>\n\t\t</div>\n\t\t<div class="input-group input-group-sm">\n\t\t\t<input type="text" class="form-control filter" placeholder="Filter, % for wildcarding" />\n\t\t\t{% if BOOTSTRAP_VERSION > 4 %}\n\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t{% else %}\n\t\t\t<div class="input-group-append">\n\t\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t</div>\n\t\t\t{% endif %}\n\t\t</div>\n\t</div>\n</div>\n',this.fragmentCriteriaStringFew='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t{% if isDefaultEntity !== true %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-andor" type="checkbox" id="EC39F3BF_99C8_FCE2_46C9_2EE80E9637FD_Q{{cnt}}" />\n\t\t\t\t<label for="EC39F3BF_99C8_FCE2_46C9_2EE80E9637FD_Q{{cnt}}">\n\t\t\t\t\t<span class="text-secondary">or</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-primary">and</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t{% endif %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-not" type="checkbox" id="AC64D4A8_B3F4_90D1_A5E6_61B0F56D27C6_Q{{cnt}}" />\n\t\t\t\t<label for="AC64D4A8_B3F4_90D1_A5E6_61B0F56D27C6_Q{{cnt}}">\n\t\t\t\t\t<span class="text-primary">not</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body" style="padding: 0.5rem;">\n\t\t<select multiple="multiple" size="6" class="form-control" style="font-size: 13px;"></select>\n\t\t<div class="text-{% if BOOTSTRAP_VERSION > 4 %}end{% else %}right{% endif %}">\n\t\t\t#<span class="count">?</span>\n\t\t</div>\n\t\t<div class="input-group input-group-sm">\n\t\t\t<input type="text" class="form-control filter" placeholder="Filter, % for wildcarding" />\n\t\t\t{% if BOOTSTRAP_VERSION > 4 %}\n\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t{% else %}\n\t\t\t<div class="input-group-append">\n\t\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t</div>\n\t\t\t{% endif %}\n\t\t</div>\n\t</div>\n</div>\n',this.fragmentCriteriaStringMany='<div class="card pull-left m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2 mt-2 align-self-start" id="C12133EC_2A38_3545_0685_974260DCC950_Q{{cnt}}" style="min-width: 285px;">\n\t<div class="card-header d-flex align-items-center px-2 py-1">\n\t\t<div class="flex-grow-1">\n\t\t\t<span class="text-success">Q{{cnt}}</span>: {{name|e}}\n\t\t</div>\n\t\t{% if isDefaultEntity !== true %}\n\t\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t\t<input class="switch-andor" type="checkbox" id="C01884D4_BFF5_95A1_DF4A_632738289AC9_Q{{cnt}}" />\n\t\t\t\t<label for="C01884D4_BFF5_95A1_DF4A_632738289AC9_Q{{cnt}}">\n\t\t\t\t\t<span class="text-secondary">or</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-primary">and</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t\t</div>\n\t\t{% endif %}\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<span class="switch switch-sm switch-on-primary switch-off-secondary">\n\t\t\t<input class="switch-not" type="checkbox" id="E24786B5_E704_FBED_4213_0F92AFA9FF3D_Q{{cnt}}" />\n\t\t\t<label for="E24786B5_E704_FBED_4213_0F92AFA9FF3D_Q{{cnt}}">\n\t\t\t\t<span class="text-primary">not</span>\n\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class="m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-3">\n\t\t\t<button type="button" class="btn close box-close px-0" data-dismiss="box"><i class="bi bi-x-circle-fill"></i></button>\n\t\t</div>\n\t</div>\n\t<div class="card-body" style="padding: 0.5rem;">\n\t\t<select multiple="multiple" size="6" class="form-control" style="font-size: 13px;"></select>\n\t\t<div class="text-{% if BOOTSTRAP_VERSION > 4 %}end{% else %}right{% endif %}">\n\t\t\t#<span class="count">?</span>, limit: <span class="limit">?</span> <a href="#" class="show-less"><i class="bi bi-dash"></i></a>/<a href="#" class="show-more"><i class="bi bi-plus"></i></a>\n\t\t</div>\n\t\t<div class="input-group input-group-sm">\n\t\t\t<input type="text" class="form-control filter" placeholder="Filter, % for wildcarding" />\n\t\t\t{% if BOOTSTRAP_VERSION > 4 %}\n\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t{% else %}\n\t\t\t<div class="input-group-append">\n\t\t\t\t<button type="button" class="btn btn-secondary filter">Apply</button>\n\t\t\t</div>\n\t\t\t{% endif %}\n\t\t</div>\n\t</div>\n</div>\n',this.fragmentJS="<script type=\"text/javascript\" src=\"{{ORIGIN_URL}}/js/jquery.min.js\"><\/script>\n\n<script type=\"text/javascript\" src=\"{{ORIGIN_URL}}/js/ami.min.js?bootstrap={{BOOTSTRAP_VERSION}}&embedded\"><\/script>\n\n<script type=\"text/javascript\">\n\n\tvar mySearch;\n\n\tamiWebApp.onRefresh = function(isAuth) {\n\n\t\tif(isAuth)\n\t\t{\n\t\t\tmySearch.render('#mySearch', {\n\t\t\t\tname: '{{name|e('js')}}',\n\t\t\t\tdefaultCatalog: '{{defaultCatalog|e('js')}}',\n\t\t\t\tdefaultEntity: '{{defaultEntity|e('js')}}',\n\t\t\t\tdefaultField: '{{defaultField|e('js')}}',\n\t\t\t\tdefaultPrimaryField: '{{defaultPrimaryField|e('js')}}',\n\t\t\t\tdefaultSelect: '{{defaultSelect|e('js')}}',\n\t\t\t\tdefaultOrderBy: '{{defaultOrderBy|e('js')}}',\n\t\t\t\tdefaultOrderWay: '{{defaultOrderWay|e('js')}}',\n\t\t\t\tcriteria: {{criteria|json_encode(0)}},\n\t\t\t\tmore: {{more|json_encode(0)}},\n\t\t\t\tcanEdit: {{canEdit}},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#mySearch').empty();\n\t\t}\n\t};\n\n\tamiWebApp.onReady = function() {\n\n\t\treturn amiWebApp.loadResources(['ctrl:search']).done(function(ctrls) {\n\n\t\t\tmySearch = new ctrls[0];\n\t\t});\n\t};\n\n\tamiWebApp.start({\n\t\tendpoint_url: '{{endpoint}}'\n\t});\n\n<\/script>\n\n\x3c!-- Add your own style --\x3e\n<ul id=\"ami_login_menu_content\"></ul>\n\n<div id=\"mySearch\"></div>\n",this.fragmentSearchCtrl='<div class="row mb-2">\n\t<div class="col-md-2 text-center">\n{% if isEmbedded %}\n\t\t<img class="d-none d-md-inline" src="{{ORIGIN_URL}}/js/assets/images/logo.png" alt="AMI" height="24" />\n{% else %}\n\t\t\x3c!-- EMPTY --\x3e\n{% endif %}\n\t</div>\n\t<div class="col-md-10 text-left">\n\t\t<div class="input-group input-group-sm">\n\t\t\t<div class="btn-group rounded-0">\n\t\t\t\t<button type="button" class="btn btn-sm btn-success" id="A604B953_E0F6_3BA3_3B8A_DE24C951B613">View Selection</button>\n\t\t\t\t<button type="button" class="btn btn-sm btn-secondary dropdown-toggle dropdown-toggle-split rounded-0" data-bs-toggle="dropdown"></button>\n\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t<a href="#" class="dropdown-item" id="D75D8E3A_8485_FF24_2EB4_2E09FEFD2750">MQL query</a>\n\t\t\t\t\t<a href="#" class="dropdown-item" id="E6B6F387_34EE_9FFB_5C5A_C92A49577133">JavaScript</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span class="form-control">\n\t\t\t\tNumber of selected items ({{defaultEntity}}): <span class="text-success" id="D7F429C8_E45C_57A3_6BCC_C74BAE4B0DDA"></span> &nbsp; <span class="" id="FB83961B_D88B_C24C_E8C5_6B3DCC2AAE2F"></span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n<div class="row">\n\t<div class="col-md-2">\n\t\t<div id="A1F37BF8_EEAA_7794_2882_AD2DFD106421">\n\t\t\t{% for criterion in criteria %}\n\t\t\t<button type="button" class="btn btn-sm btn-outline-primary" style="margin-bottom: 4px; padding: .25rem .25rem; width: 100%;" data-open-box="{{loop.index0}}">{{criterion.name|e}}</button>\n\t\t\t{% endfor %}\n\t\t</div>\n\t</div>\n\t<div class="col-md-10">\n\t\t<div class="input-group input-group-sm">\n\t\t\t<input type="text" class="form-control" id="CA15011B_EECA_E9AB_63EE_7A2A467025A5" />\n\t\t\t{% if BOOTSTRAP_VERSION > 4 %}\n\t\t\t<button type="button" class="btn btn-outline-secondary" id="AADD9C49_349F_5910_336E_F299F6196408"><i class="bi bi-check"></i></button>\n\t\t\t{% else %}\n\t\t\t<div class="input-group-append">\n\t\t\t\t<button type="button" class="btn btn-outline-secondary" id="AADD9C49_349F_5910_336E_F299F6196408"><i class="bi bi-check"></i></button>\n\t\t\t</div>\n\t\t\t{% endif %}\n\t\t</div>\n\t\t<div class="d-flex flex-wrap justify-content-start" id="CF445396_19BE_7A34_902E_7F63B53CAEC8"></div>\n\t</div>\n</div>\n',this.tabCtor=e[0],t.resolve()}).fail(e=>{t.reject(e)}),t},render:function(t,e){return this.setupCtx({isEmbedded:amiWebApp.isEmbedded(),endpoint:amiCommand.getHttpEndpoint(),cnt:1,ast:null,predicates:{},mql:"",js:""},{name:"N/A",defaultCatalog:"",defaultEntity:"",defaultField:"",defaultPrimaryField:"",defaultSelect:"*",defaultOrderBy:"",defaultOrderWay:"",criteria:[],more:{},canEdit:!1},e),"canEdit"in this.ctx.more&&this.ctx.more.canEdit&&(delete this.ctx.more.canEdit,this.ctx.canEdit=!0),amiWebApp.lock(),this.tabCtrl=new this.tabCtor(this.getParent(),this),this.tabCtrl.render(t).done(()=>{this.renderForm().done(()=>{amiWebApp.unlock()})})},renderForm:function(){const t=$.Deferred();return this.tabCtrl.appendItem(`<i class="bi bi-search"></i> ${this.ctx.name}`).done(e=>{this.replaceHTML(e,this.fragmentSearchCtrl,{dict:this.ctx}).done(()=>{$(e).find("button[data-open-box]").click(t=>{t.preventDefault(),this.openBox($(t.currentTarget).attr("data-open-box"))}),$(this.patchId("#F5F9DA0F_C961_4EA5_CFDA_1C5CEA91F4B1")).click(t=>{t.preventDefault(),this.addCriteria()}),$(this.patchId("#D199AEE3_39DD_D588_FA94_FB525CEAEAEE")).click(t=>{t.preventDefault(),this.openSchema()}),$(this.patchId("#AADD9C49_349F_5910_336E_F299F6196408")).click(t=>{t.preventDefault(),this.updateExpression()}),$(this.patchId("#CA15011B_EECA_E9AB_63EE_7A2A467025A5")).keypress(t=>{13==t.keyCode&&(t.preventDefault(),this.updateExpression())}),$(this.patchId("#A604B953_E0F6_3BA3_3B8A_DE24C951B613")).click(t=>{t.preventDefault(),this.viewSelection()}),$(this.patchId("#D75D8E3A_8485_FF24_2EB4_2E09FEFD2750")).click(t=>{t.preventDefault(),this.showMQL()}),$(this.patchId("#E6B6F387_34EE_9FFB_5C5A_C92A49577133")).click(t=>{t.preventDefault(),this.showJS()});let i=!0;return[...this.ctx.criteria].forEach((t,e)=>{!0===t.more.auto_open&&(this.openBox(e),i=!1)}),i&&this.refresh(),t.resolve()})}),t},openBox:function(t){let e,i;const a={},n=[],s=this.ctx.criteria[t],r=this.patchId("#CF445396_19BE_7A34_902E_7F63B53CAEC8"),l=s.catalog,o=s.entity,c=s.field;switch(s.isDefaultEntity=this.ctx.defaultEntity===o,s.type){case 0:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaStringFew,{dict:s});break;case 1:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaStringMany,{dict:s});break;case 2:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaNumber,{dict:s});break;case 3:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaDate,{dict:s});break;case 4:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaBool,{dict:s});break;case 5:case 7:case 9:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaParamFew,{dict:s});break;case 6:case 8:case 10:e="Q"+(s.cnt=this.ctx.cnt++),i=this.appendHTML(r,this.fragmentCriteriaParamMany,{dict:s});break;default:return}i.done(()=>{const t=`${this.patchId("#C12133EC_2A38_3545_0685_974260DCC950")}_${e}`,i=$(t),r=this.ctx.defaultEntity===o;switch(s.type){case 0:case 1:if(i.find("select").change(t=>{t.preventDefault(),i.find("input.filter").val(""),this.select(e)}),i.find("button.filter").click(t=>{t.preventDefault(),this.filter(e)}),i.find("input.filter").keypress(t=>{13===t.keyCode&&(t.preventDefault(),this.filter(e))}),i.find('input[type="checkbox"]').change(t=>{t.preventDefault(),""===i.find("input.filter").val()?this.select(e):this.filter(e)}),i.find(".show-less").click(t=>{t.preventDefault(),this.viewLess(e)}),i.find(".show-more").click(t=>{t.preventDefault(),this.viewMore(e)}),"init_value"in s.more){const t=[];for(let e in s.more.init_value)a[s.more.init_value[e]]=!0,"@NULL"===s.more.init_value?t.push(`\`${l}\`.\`${o}\`.\`${c}\`${this.dumpConstraints(s)} IS NULL`):t.push(`\`${l}\`.\`${o}\`.\`${c}\`${this.dumpConstraints(s)} = '${s.more.init_value[e].replace(/'/g,"''")}'`);r?n.push(t.join(" OR ")):n.push(`[${t.join(" OR ")}]`)}break;case 2:case 3:i.find(".set").click(t=>{t.preventDefault(),this.setMinMax(e)}),i.find(".reset").click(t=>{t.preventDefault(),amiWebApp.lock();const i=this.ctx.predicates[e];$(`${i.selector} input[type="checkbox"]`).prop("checked",!1),$(`${i.selector} input.min`).val(""),$(`${i.selector} input.max`).val(""),this.fillNumberBox(e,!0).done(()=>{this.setMinMax(e)}).always(()=>{amiWebApp.unlock()})}),i.find('input[type="checkbox"]').change(t=>{t.preventDefault();const i=this.ctx.predicates[e];$(`${i.selector} input[type="checkbox"]`).prop("checked")?($(`${i.selector} input.min`).attr("disabled","disabled"),$(`${i.selector} input.max`).attr("disabled","disabled")):($(`${i.selector} input.min`).removeAttr("disabled"),$(`${i.selector} input.max`).removeAttr("disabled")),this.setMinMax(e)}),i.find(".timedate").daterangepicker({timePicker:!0,timePicker24Hour:!0,singleDatePicker:!0,locale:{format:"YYYY-MM-DD HH:mm:ss"}}),"more"in s&&("min"in s.more&&(r?n.push(`\`${l}\`.\`${o}\`.\`${c}\`${this.dumpConstraints(s)} >= AMI_TIMESTAMP('${new String(s.more.min).replace(/'/g,"''")}')`):n.push(`[\`${l}\`.\`${o}\`.\`${c}\`${this.dumpConstraints(s)} >= AMI_TIMESTAMP('${new String(s.more.min).replace(/'/g,"''")}')]`)),"max"in s.more&&(r?n.push(`\`${l}\`.\`${o}\`.\`${c}\`${this.dumpConstraints(s)} <= AMI_TIMESTAMP('${new String(s.more.max).replace(/'/g,"''")}')`):n.push(`[\`${l}\`.\`${o}\`.\`${c}\`${this.dumpConstraints(s)} <= AMI_TIMESTAMP('${new String(s.more.max).replace(/'/g,"''")}')]`)));break;case 4:i.find('input[type="checkbox"]').change(t=>{t.preventDefault(),this.toggle(e)});break;case 5:case 6:case 7:case 8:case 9:case 10:i.find(".key").change(t=>{t.preventDefault(),this.selectParamKey(e)}),i.find(".value").change(t=>{t.preventDefault(),this.select(e)}),i.find("button.filter").click(t=>{t.preventDefault(),this.filter(e)}),i.find("input.filter").keypress(t=>{13===t.keyCode&&(t.preventDefault(),this.filter(e))}),i.find('input[type="checkbox"]').change(t=>{t.preventDefault(),this.select(e)}),i.find(".show-less").click(t=>{t.preventDefault()}),i.find(".show-more").click(t=>{t.preventDefault()})}i.find('button[data-dismiss="box"]').click(t=>{t.preventDefault(),this.closeBox(e)}),this.ctx.predicates[e]={selector:t,criterion:s,select:a,filter:n.join(" AND "),limit:10},this.addPredicateInAST(e),4===s.type?this.toggle(e):2===s.type||3===s.type?(amiWebApp.lock(),this.fillNumberBox(e,!0).done(()=>{this.setMinMax(e)}).always(()=>{amiWebApp.unlock()})):this.refresh(e)})},closeBox:function(t){$(this.ctx.predicates[t].selector).remove(),delete this.ctx.predicates[t],this.delPredicateInAST(t),this.refresh()},refresh:function(){amiWebApp.lock();try{let t;$.each(this.ctx.predicates,e=>{switch(t=this.ctx.predicates[e],t.criterion.type){case 0:amiWebApp.lock(),this.fillStringBox(e,!0,!1).always(()=>{amiWebApp.unlock()});break;case 1:amiWebApp.lock(),this.fillStringBox(e,!0,!0).always(()=>{amiWebApp.unlock()});break;case 2:case 3:amiWebApp.lock(),this.fillNumberBox(e,!1).always(()=>{amiWebApp.unlock()});break;case 5:case 6:case 7:case 8:case 9:case 10:amiWebApp.lock(),this.fillParamBoxKey(e),this.fillParamBoxVal(e).always(()=>{amiWebApp.unlock()})}},this),$(this.patchId("#CA15011B_EECA_E9AB_63EE_7A2A467025A5")).val(this.dumpAST());const e=this.dumpAST(this.ctx.predicates);let i=`SELECT COUNT(${this.ctx.defaultPrimaryField}) AS \`nb\``;return this.ctx.mql=`SELECT ${this.ctx.defaultSelect}`,e&&(i+=` WHERE ${e}`,this.ctx.mql+=` WHERE ${e}`),this.ctx.mql=this.ctx.mql.replace(/and/g,"AND").replace(/or/g,"OR").replace(/not/g,"NOT"),this.ctx.js=amiWebApp.formatTWIG(this.fragmentJS,this.ctx),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(this.ctx.defaultCatalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(i)}"`).done(t=>{const e=amiWebApp.jspath('..field{.@name==="nb"}.$',t)[0]||"N/A";$(this.patchId("#D7F429C8_E45C_57A3_6BCC_C74BAE4B0DDA")).text(e),amiWebApp.unlock(),$(this.patchId("#FB83961B_D88B_C24C_E8C5_6B3DCC2AAE2F")).text(""),0!=e&&this._loadSummary([],0)}).fail((t,e)=>{amiWebApp.error(e)})}catch(t){amiWebApp.error(t,!0)}},_loadSummary:function(t,e){if(this.ctx.more.summary&&this.ctx.more.summary.length>0)if(e<this.ctx.more.summary.length){const i=this.dumpAST(this.ctx.predicates);let a="",n=this.ctx.more.summary[e].constraints?this.ctx.more.summary[e].constraints:"";switch(this.ctx.more.summary[e].type){case 0:a=`SELECT COUNT(DISTINCT \`${this.ctx.more.summary[e].catalog}\`.\`${this.ctx.more.summary[e].entity}\`.\`${this.ctx.more.summary[e].field}\`${n}) AS RES`,i&&(a+=` WHERE ${i}`);break;case 1:a=`SELECT SUM(\`${this.ctx.more.summary[e].catalog}\`.\`${this.ctx.more.summary[e].entity}\`.\`${this.ctx.more.summary[e].field}\`${n}) AS RES`,i&&(a+=` WHERE ${i}`);break;case 2:a=`SELECT ROUND(AVG(\`${this.ctx.more.summary[e].catalog}\`.\`${this.ctx.more.summary[e].entity}\`.\`${this.ctx.more.summary[e].field}\`${n})) AS RES`,i&&(a+=` WHERE ${i}`)}const s=`SearchQuery -catalog="${this.ctx.more.summary[e].catalog}" -entity="${this.ctx.defaultEntity}" -mql="${a}"`;amiCommand.execute(s).done(i=>{const a=amiWebApp.jspath('..field{.@name==="RES"}.$',i)[0]||"N/A",n=`${this.ctx.more.summary[e].name}: ${a}`;"@NULL"!==a&&t.push(n),this._loadSummary(t,e+1)}).fail((t,e)=>{amiWebApp.error(e,!0)})}else $(this.patchId("#FB83961B_D88B_C24C_E8C5_6B3DCC2AAE2F")).text(t.join(", "))},fillStringBox:function(t,e,i){const a=this.ctx.predicates[t],n=a.criterion;let s=`SELECT DISTINCT \`${n.catalog}\`.\`${n.entity}\`.\`${n.field}\`${this.dumpConstraints(n)}`;const r=this.dumpFilterAST(t);return r&&(s+=` WHERE ${r}`),n.more.order&&(s+=` ORDER BY  \`${n.catalog}\`.\`${n.entity}\`.\`${n.field}\` ${n.more.order}`),i&&(s+=` LIMIT ${a.limit+Object.keys(a.select).length} OFFSET 0`),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(n.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(s)}"`).done(t=>{const e=[],s=[],l=amiWebApp.jspath("..row",t);if(Object.keys(a.select).forEach(i=>{const a=amiWebApp.textToHtml(i);amiWebApp.jspath("..row.field{.$ === '"+i+"'}.$",t)[0]?e.push(`<option value="${a}" selected="selected">${a}</option>`):s.push(i)}),s.length>0){let t=`SELECT DISTINCT \`${n.catalog}\`.\`${n.entity}\`.\`${n.field}\`${this.dumpConstraints(n)}`;t+=` WHERE \`${n.catalog}\`.\`${n.entity}\`.\`${n.field}\`${this.dumpConstraints(n)} IN ('${s.join("','")}')`,r&&(t+=` AND ${r}`),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(n.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(t)}"`).done(t=>{s.forEach(i=>{const a=amiWebApp.textToHtml(i);amiWebApp.jspath("..row.field{.$ === '"+i+"'}.$",t)[0]?e.push(`<option value="${a}" selected="selected">${a}</option>`):e.push(`<option value="${a}" selected="selected" class="text-danger">${a}</option>`)});let n=0;$.each(l,(t,s)=>{if(i&&n>=a.limit-Object.keys(a.select).length)return!1;const r=amiWebApp.jspath("..field.$",s)[0]||"";if(!(r in a.select)){const t=amiWebApp.textToHtml(r);e.push(`<option value="${t}" xxxxxxxx="xxxxxxxx">${t}</option>`),n+=1}}),e.sort(),"::any::"in a.select?e.unshift('<option value="::any::" selected="selected">« reset filter »</option>'):e.unshift('<option value="::any::" xxxxxxxx="xxxxxxxx">« reset filter »</option>'),$(`${a.selector} select`).html(e.join("")),$(`${a.selector} .count`).text(e.length-1),$(`${a.selector} .limit`).text(a.limit)}).fail(t=>{amiWebApp.error(amiWebApp.jspath("..error.$",t),!0)})}else{let t=0;$.each(l,(n,s)=>{if(i&&t>=a.limit-Object.keys(a.select).length)return!1;const r=amiWebApp.jspath("..field.$",s)[0]||"";if(!(r in a.select)){const i=amiWebApp.textToHtml(r);e.push(`<option value="${i}" xxxxxxxx="xxxxxxxx">${i}</option>`),t+=1}}),e.sort(),"::any::"in a.select?e.unshift('<option value="::any::" selected="selected">« reset filter »</option>'):e.unshift('<option value="::any::" xxxxxxxx="xxxxxxxx">« reset filter »</option>'),$(`${a.selector} select`).html(e.join("")),$(`${a.selector} .count`).text(e.length-1),$(`${a.selector} .limit`).text(a.limit)}}).fail(t=>{amiWebApp.error(amiWebApp.jspath("..error.$",t),!0)})},fillStringBoxOri:function(t,e,i){const a=this.ctx.predicates[t],n=a.criterion;let s=`SELECT DISTINCT \`${n.catalog}\`.\`${n.entity}\`.\`${n.field}\`${this.dumpConstraints(n)}`;const r=this.dumpFilterAST(t);return r&&(s+=` WHERE ${r}`),n.more.order&&(s+=` ORDER BY  \`${n.catalog}\`.\`${n.entity}\`.\`${n.field}\` ${n.more.order}`),i&&(s+=` LIMIT ${a.limit-Object.keys(a.select).length<=0?"0":a.limit-Object.keys(a.select).length} OFFSET 0`),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(n.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(s)}"`).done(t=>{const e=[],i=amiWebApp.jspath("..row",t);Object.keys(a.select).forEach(i=>{const a=amiWebApp.textToHtml(i);amiWebApp.jspath("..row.field{.$ === '"+i+"'}.$",t)[0]?e.push(`<option value="${a}" selected="selected">${a}</option>`):e.push(`<option value="${a}" selected="selected" class="text-danger">${a}</option>`)}),$.each(i,(t,i)=>{const n=amiWebApp.jspath("..field.$",i)[0]||"";if(!(n in a.select)){const t=amiWebApp.textToHtml(n);e.push(`<option value="${t}" xxxxxxxx="xxxxxxxx">${t}</option>`)}}),e.sort(),"::any::"in a.select?e.unshift('<option value="::any::" selected="selected">« reset filter »</option>'):e.unshift('<option value="::any::" xxxxxxxx="xxxxxxxx">« reset filter »</option>'),$(`${a.selector} select`).html(e.join("")),$(`${a.selector} .count`).text(e.length-1),$(`${a.selector} .limit`).text(a.limit)}).fail(t=>{amiWebApp.error(amiWebApp.jspath("..error.$",t),!0)})},fillParamBoxKey:function(t){amiWebApp.lock();let e=this.ctx.predicates[t],i=e.criterion,a="";switch(i.type){case 5:case 6:a=`SELECT JSON_PATHS(\`${i.catalog}\`.\`${i.entity}\`.\`${i.field}\`${this.dumpConstraints(i)}, '$') WHERE 1`;break;case 7:case 8:case 9:case 10:a=`SELECT DISTINCT \`${i.catalog}\`.\`${i.entity}\`.\`${i.key_field}\`${this.dumpConstraints(i)}`}const n=this.dumpFilterAST(t);n&&(a+=` WHERE ${n}`),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(i.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(a)}"`).done(t=>{const a=amiWebApp.jspath("..field",t);let n={};switch(i.type){case 5:case 6:n["@NULL"]="@NULL",$.each(a,(t,e)=>{let i=e.$.substring(2);n[i]=i}),this._fillParamBoxKey(n,e);break;case 7:case 8:case 9:case 10:$.each(a,(t,e)=>{n[e.$]=e.$}),this._fillParamBoxKey(n,e)}amiWebApp.unlock()}).fail(t=>{amiWebApp.error(amiWebApp.jspath("..error.$",t),!0)})},_fillParamBoxKey:function(t,e){if(!1===$.isEmptyObject(t)){const i=[];let a=!1;$(`${e.selector} select.key`).removeClass("text-danger"),e.selectedParam&&(t[e.selectedParam]?(a=!0,i.push(`<option value="${amiWebApp.textToHtml(e.selectedParam)}" selected="selected" class="text-dark">${amiWebApp.textToHtml(e.selectedParam)}</option>`)):(a=!0,$(`${e.selector} select.key`).addClass("text-danger"),i.push(`<option value="${amiWebApp.textToHtml(e.selectedParam)}" selected="selected">${amiWebApp.textToHtml(e.selectedParam)}</option>`)));for(const a in t)a!==e.selectedParam&&i.push(`<option value="${amiWebApp.textToHtml(a)}" xxxxxxxx="xxxxxxxx" class="text-dark">${amiWebApp.textToHtml(a)}</option>`);i.sort(),"::any::"===e.selectedParam?(a=!0,i.unshift('<option value="::any::" selected="selected" class="text-dark">« reset filter »</option>')):i.unshift('<option value="::any::" xxxxxxxx="xxxxxxxx" class="text-dark">« reset filter »</option>'),$(`${e.selector} select:first`).html(i.join("")),a||($(`${e.selector} select:last`).html(""),$(`${e.selector} select:last`).attr("disabled","disabled"))}else $(`${e.selector} select:first`).html(""),$(`${e.selector} select:last`).html(""),$(`${e.selector} select:last`).attr("disabled","disabled")},fillParamBoxVal:function(t,e,i){amiWebApp.lock();const a=$.Deferred(),n=this.ctx.predicates[t],s=n.criterion,r=this.ctx.predicates[t].selectedParam||"";if(""!==r){let e="";switch(s.type){case 5:case 6:e=`SELECT JSON_VALUES(\`${s.catalog}\`.\`${s.entity}\`.\`${s.field}\`${this.dumpConstraints(s)}, '$.${r}') WHERE 1`;break;case 7:case 8:e=`SELECT DISTINCT \`${s.catalog}\`.\`${s.entity}\`.\`${s.field}\`${this.dumpConstraints(s)} WHERE \`${s.catalog}\`.\`${s.entity}\`.\`${s.key_field}\`${this.dumpConstraints(s)} = '${r}'`;break;case 9:case 10:e=`SELECT DISTINCT \`${s.catalog}\`.\`${s.entity}\`.\`${this.ctx.predicates[t].selectedValueField}\`${this.dumpConstraints(s)} WHERE \`${s.catalog}\`.\`${s.entity}\`.\`${s.key_field}\`${this.dumpConstraints(s)} = '${r}'`}const l=this.dumpFilterAST(t);if(l){switch(s.type){case 5:case 6:e+=" WHERE ";break;case 7:case 8:case 9:case 10:e+=" AND "}e+=l}if(s.more.order)switch(s.type){case 5:case 6:case 7:case 8:e+=` ORDER BY \`${s.catalog}\`.\`${s.entity}\`.\`${s.field}\` ${s.more.order}`;break;case 9:case 10:e+=` ORDER BY \`${s.catalog}\`.\`${s.entity}\`.\`${this.ctx.predicates[t].selectedValueField}\` ${s.more.order}`}i&&(e+=` LIMIT ${n.limit} OFFSET 0`),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(s.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(e)}"`).done(t=>{const e=[],i=amiWebApp.jspath("..field",t);let r={};$.each(i,(t,e)=>{let i,a=[];switch(s.type){case 5:case 6:i=(e.$||"").trim(),i.startsWith('"')&&i.endsWith('"')&&(i=amiWebApp.stringToText(i.substring(1,i.length-1)),r[i]=i),i.startsWith("[")&&i.endsWith("]")?(a=JSON.parse(i),a.forEach(t=>{r[t]=t})):r[i]=i;break;case 7:case 8:case 9:case 10:i=e.$||"",r[i]=i}}),Object.keys(n.select).forEach(t=>{const i=amiWebApp.textToHtml(t);r[t]?e.push(`<option value="${i}" selected="selected">${i}</option>`):e.push(`<option value="${i}" selected="selected" class="text-danger">${i}</option>`)});for(const t in r)""!==t&&(t in n.select||e.push(`<option value="${amiWebApp.textToHtml(t)}" xxxxxxxx="xxxxxxxx">${amiWebApp.textToHtml(t)}</option>`));e.length>0?(e.sort(),"::any::"in n.select?e.unshift('<option value="::any::" selected="selected">« reset filter »</option>'):e.unshift('<option value="::any::" xxxxxxxx="xxxxxxxx">« reset filter »</option>'),$(`${n.selector} select:last`).html(e.join("")),$(`${n.selector} .count`).text(e.length-1),$(`${n.selector} .limit`).text(n.limit),$(`${n.selector} select:last`).removeAttr("disabled")):($(`${n.selector} select:last`).html(""),$(`${n.selector} select:last`).attr("disabled","disabled")),a.resolve(),amiWebApp.unlock()}).fail(t=>{amiWebApp.error(amiWebApp.jspath("..error.$",t),!0),a.reject()})}else $(`${n.selector} select:last`).html(""),$(`${n.selector} select:last`).attr("disabled","disabled"),a.resolve(),amiWebApp.unlock();return a},fillNumberBox:function(t,e){const i=this.ctx.predicates[t],a=i.criterion;let n=`SELECT MIN(\`${a.catalog}\`.\`${a.entity}\`.\`${a.field}\`${this.dumpConstraints(a)}) AS \`min\`, MAX(\`${a.catalog}\`.\`${a.entity}\`.\`${a.field}\`${this.dumpConstraints(a)}) AS \`max\``;const s=this.dumpFilterAST(t);return s&&(n+=` WHERE ${s}`),amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(a.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(n)}"`).done(t=>{let a=amiWebApp.jspath('..field{.@name==="min"}.$',t)[0]||"",n=amiWebApp.jspath('..field{.@name==="max"}.$',t)[0]||"";"@NULL"===a&&(a=""),"@NULL"===n&&(n=""),""!==a&&""!==n?""!==$(`${i.selector} input.min`).val()&&""!==$(`${i.selector} input.max`).val()?!$.isEmptyObject(i.select.min)&&""!==i.select.min||!$.isEmptyObject(i.select.max)&&""!==i.select.max?($(`${i.selector} input.min`).val(i.select.min),$(`${i.selector} input.max`).val(i.select.max),parseFloat(i.select.min)<parseFloat(a)?$(`${i.selector} input.min`).addClass("text-danger"):$(`${i.selector} input.min`).removeClass("text-danger"),parseFloat(i.select.max)>parseFloat(n)?$(`${i.selector} input.max`).addClass("text-danger"):$(`${i.selector} input.max`).removeClass("text-danger")):($(`${i.selector} input.min`).val(a),$(`${i.selector} input.max`).val(n)):e&&($(`${i.selector} input.min`).val(a),$(`${i.selector} input.max`).val(n)):(""!==i.select.min?$(`${i.selector} input.min`).addClass("text-danger"):$(`${i.selector} input.min`).removeClass("text-danger"),""!==i.select.max?$(`${i.selector} input.max`).addClass("text-danger"):$(`${i.selector} input.max`).removeClass("text-danger"))}).fail(t=>{amiWebApp.error(amiWebApp.jspath("..error.$",t),!0)})},selectParamKey:function(t){let e=this.ctx.predicates[t],i=e.criterion;if(e.select={},0==$(`${e.selector} select:first option[value="::any::"]:selected`).length?this.ctx.predicates[t].selectedParam=$(`${e.selector} select:first option:selected`).val():this.ctx.predicates[t].selectedParam="",""!==this.ctx.predicates[t].selectedParam)if(9===this.ctx.predicates[t].criterion.type||10===this.ctx.predicates[t].criterion.type){let a=`SELECT DISTINCT \`${i.catalog}\`.\`${i.entity}\`.\`${i.field}\`${this.dumpConstraints(i)} WHERE \`${i.catalog}\`.\`${i.entity}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${this.ctx.predicates[t].selectedParam}'`;amiCommand.execute(`SearchQuery -catalog="${amiWebApp.textToString(i.catalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(a)}"`).done(i=>{switch(this.ctx.predicates[t].selectedValueField=amiWebApp.jspath("..field",i)[0].$||"",e.criterion.type){case 9:this.fillParamBoxVal(t,!1,!1).always(()=>{this.select(t)});break;case 10:this.fillParamBoxVal(t,!0,!0).always(()=>{this.select(t)})}})}else switch(e.criterion.type){case 5:case 7:this.fillParamBoxVal(t,!1,!1).always(()=>{this.select(t)});break;case 6:case 8:this.fillParamBoxVal(t,!0,!0).always(()=>{this.select(t)})}else switch(e.criterion.type){case 5:case 7:case 9:this.fillParamBoxVal(t,!1,!1).always(()=>{this.select(t)});break;case 6:case 8:case 10:this.fillParamBoxVal(t,!0,!0).always(()=>{this.select(t)})}},select:function(t){let e=this.ctx.predicates[t],i=e.criterion,a=i.catalog,n=i.entity,s=i.field,r=this.ctx.defaultEntity===n,l=e.selectedParam;amiWebApp.lock();let o=[],c={};if(0===$(`${e.selector} select:last option[value="::any::"]:selected`).length&&0!==$(`${e.selector} select:last option:selected`).length)$(`${e.selector} select:last option:selected`).each((e,d)=>{switch(i.type){case 0:case 1:"@NULL"===d.value?r?o.push(`\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} IS NULL`):o.push(`[\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} IS NULL]`):r?o.push(`\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${amiWebApp.textToSQL(d.value)}'`):o.push(`[\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${amiWebApp.textToSQL(d.value)}']`);break;case 5:case 6:if(l)if(r)if("@NULL"===l)o.push(`\`${a}\`.\`${n}\`.\`${s}\` IS NULL`);else if("@NULL"===d.value)o.push(`JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${l}') IS NULL`);else if(l.endsWith("[*]"))o.push(`JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${l.replace(/\[\*\]/g,"")}') LIKE '[%${amiWebApp.textToSQL(d.value)}%]'`);else{let t="";if(l.includes("[*].")){const e=l.lastIndexOf("[*]."),r=l.substring(0,e).replace(/\[\*\]/g,""),o=l.substring(e+4);t=`JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${r}') LIKE '[%${o}%${amiWebApp.textToSQL(d.value)}%]' OR `}t=`(${t}JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${l}') = '${amiWebApp.textToSQL(d.value)}')`,o.push(t)}else if("@NULL"===l)o.push(`[\`${a}\`.\`${n}\`.\`${s}\` IS NULL]`);else if("@NULL"===d.value)o.push(`[JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${l}') IS NULL]`);else if(l.endsWith("[*]"))o.push(`[JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${l.replace(/\[\*\]/g,"")}') LIKE '[%${amiWebApp.textToSQL(d.value)}%]']`);else{let t="";if(l.includes("[*].")){const e=l.lastIndexOf("[*]."),r=l.substring(0,e).replace(/\[\*\]/g,""),o=l.substring(e+4);t=`JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${r}') LIKE '[%${o}%${amiWebApp.textToSQL(d.value)}%]' OR `}t=`(${t}JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${l}') = '${amiWebApp.textToSQL(d.value)}')`,o.push(`[${t}]`)}break;case 7:case 8:l&&(r?o.push(`(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${l}' AND \`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${amiWebApp.textToSQL(d.value)}')`):o.push(`[(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${l}' AND \`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${amiWebApp.textToSQL(d.value)}')]`));break;case 9:case 10:l&&(r?o.push(`(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${l}' AND \`${a}\`.\`${n}\`.\`${this.ctx.predicates[t].selectedValueField}\`${this.dumpConstraints(i)} = '${amiWebApp.textToSQL(d.value)}')`):o.push(`[(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${l}' AND \`${a}\`.\`${n}\`.\`${this.ctx.predicates[t].selectedValueField}\`${this.dumpConstraints(i)} = '${amiWebApp.textToSQL(d.value)}')]`))}c[d.value]=!0}),e.filter=o.join($(`${e.selector} input.switch-andor`).prop("checked")?" AND ":" OR "),$(`${e.selector} input.switch-not`).prop("checked")&&(e.filter=`NOT (${e.filter})`),e.select=c;else{switch(i.type){case 5:case 6:l&&(r?"@NULL"===l?o.push(`\`${a}\`.\`${n}\`.\`${s}\` IS NULL`):l.endsWith("[*]")?o.push(`JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)}, '$.${l.substring(0,l.length-3)}') IS NOT NULL`):o.push(`JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)}, '$.${l}') IS NOT NULL`):"@NULL"===l?o.push(`[\`${a}\`.\`${n}\`.\`${s}\` IS NULL]`):l.endsWith("[*]")?o.push(`[JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)}, '$.${l.substring(0,l.length-3)}') IS NOT NULL]`):o.push(`[JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)}, '$.${l}') IS NOT NULL]`))}e.filter=o.join($(`${e.selector} input.switch-andor`).prop("checked")?" AND ":" OR "),l&&$(`${e.selector} input.switch-not`).prop("checked")&&(e.filter=`NOT (${e.filter})`),e.select=c}this.refresh(),amiWebApp.unlock()},_wildcard:function(t,e){let i;for(let a=0;a<t.length;e=e.substring(i+t[a++].length))if((i=e.indexOf(t[a]))<0)return!1;return!0},filter:function(t){let e=this.ctx.predicates[t],i=e.criterion,a=i.catalog,n=i.entity,s=i.field,r=e.selectedParam,l=this.ctx.defaultEntity===n;amiWebApp.lock();let o,c=$(`${e.selector} .filter`).val();switch(i.type){case 0:if(c.includes("%"))if(l)o=`\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} LIKE '${c.replace(/'/g,"''")}'`;else{let t=$(`${e.selector} select:last option:not(:first)`),r=c.split("%"),l=[];t.each((t,e)=>{c&&this._wildcard(r,e.value)&&l.push(`[\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${e.value.trim()}']`)}),o=l.join($(`${e.selector} input[type="checkbox"]`).prop("checked")?" AND ":" OR ")}else o=`\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${c.replace(/'/g,"''")}'`;break;case 1:o=c.includes("%")?`\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} LIKE '${c.replace(/'/g,"''")}'`:`\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)} = '${c.replace(/'/g,"''")}'`;break;case 5:case 6:o="@NULL"===r?`\`${a}\`.\`${n}\`.\`${i.field}\` IS NULL`:c.includes("%")?r.endsWith("[*]")?`JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${r.substring(0,r.length-3)}') LIKE '[%${amiWebApp.textToSQL(c)}%]'`:`JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${r}') LIKE '${amiWebApp.textToSQL(c)}'`:r.endsWith("[*]")?`JSON_QUERY(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${r.substring(0,r.length-3)}') LIKE '[%${amiWebApp.textToSQL(c)}%]'`:`JSON_VALUE(\`${a}\`.\`${n}\`.\`${s}\`${this.dumpConstraints(i)},'$.${r}') = '${amiWebApp.textToSQL(c)}'`;break;case 7:case 8:o=c.includes("%")?`(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${r}' AND \`${a}\`.\`${n}\`.\`${i.field}\` LIKE '${c.replace(/'/g,"''")}')`:`(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${r}' AND \`${a}\`.\`${n}\`.\`${i.field}\` = '${c.replace(/'/g,"''")}')`;break;case 9:case 10:o=c.includes("%")?`(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${r}' AND \`${a}\`.\`${n}\`.\`${this.ctx.predicates[t].selectedValueField}\` LIKE '${c.replace(/'/g,"''")}')`:`(\`${a}\`.\`${n}\`.\`${i.key_field}\`${this.dumpConstraints(i)} = '${r}' AND \`${a}\`.\`${n}\`.\`${this.ctx.predicates[t].selectedValueField}\` = '${c.replace(/'/g,"''")}')`}$(`${e.selector} input.switch-not`).prop("checked")&&(o=`NOT (${o})`),l||0===i.type?e.filter=o:e.filter=`[${o}]`,e.select={};let d=$(`${e.selector} select:last option:not(:first)`);if(c.includes("%")){let t=c.split("%");d.each((i,a)=>{c&&this._wildcard(t,a.value)&&(e.select[a.value.trim()]=!0)})}else d.each((t,i)=>{c&&c===i.value&&(e.select[i.value.trim()]=!0)});this.refresh(),amiWebApp.unlock()},viewLess:function(t){let e=this.ctx.predicates[t];e.limit>100?e.limit-=100:e.limit>10?e.limit-=10:e.limit>1&&(e.limit-=1),amiWebApp.lock(),this.fillStringBox(t,!0,!0).always(()=>{let i=$(`${e.selector} .filter`).val().trim();i&&""!==i&&this.filter(t),amiWebApp.unlock()})},viewMore:function(t){let e=this.ctx.predicates[t];e.limit>=100?e.limit+=100:e.limit>=10?e.limit+=10:e.limit>=0&&(e.limit+=1),amiWebApp.lock(),this.fillStringBox(t,!0,!0).always(()=>{let i=$(`${e.selector} .filter`).val().trim();i&&""!==i&&this.filter(t),amiWebApp.unlock()})},setMinMax:function(t){let e,i=this.ctx.predicates[t],a=i.criterion,n=a.catalog,s=a.entity,r=a.field;if(amiWebApp.lock(),$(`${i.selector} input.switch-null`).prop("checked"))$(`${i.selector} input.min`).attr("disabled","disabled"),$(`${i.selector} input.max`).attr("disabled","disabled"),e=`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} IS NULL`;else{let t=$(`${i.selector} input.min`).val()||"",l=$(`${i.selector} input.max`).val()||"";$(`${i.selector} input.min`).removeAttr("disabled"),$(`${i.selector} input.max`).removeAttr("disabled"),i.select.min=t,i.select.max=l,e=""===t||""===l?`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} IS NULL`:3===i.criterion.type?$(`${i.selector} input.switch-in`).prop("checked")?`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} < AMI_TIMESTAMP('${t}') OR \`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} > AMI_TIMESTAMP('${l}')`:`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} >= AMI_TIMESTAMP('${t}') AND \`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} <= AMI_TIMESTAMP('${l}')`:$(`${i.selector} input.switch-in`).prop("checked")?`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} < ${t} OR \`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} > ${l}`:`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} >= ${t} AND \`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} <= ${l}`}let l=this.ctx.defaultEntity===s;i.filter=l||""===e?e:`[${e}]`,this.refresh(),amiWebApp.unlock()},toggle:function(t){let e,i=this.ctx.predicates[t],a=i.criterion,n=a.catalog,s=a.entity,r=a.field;amiWebApp.lock(),$(`${i.selector} input[type="checkbox"]`).prop("checked")?e=`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} = '${new String(a.more.on).replace(/'/g,"''")}'`:a.more.inclusive||(e=`\`${n}\`.\`${s}\`.\`${r}\`${this.dumpConstraints(a)} = '${new String(a.more.off).replace(/'/g,"''")}'`);let l=this.ctx.defaultEntity===s;i.filter=l?e:`[${e}]`,this.refresh(),amiWebApp.unlock()},addCriteria:function(){alert("TODO")},openSchema:function(){amiWebApp.createControlInContainer(this.tabCtrl,this,"schema",[this.ctx.defaultCatalog],{},this.ctx,"database",this.ctx.defaultCatalog)},viewSelection:function(){amiWebApp.createControlInContainer(this.tabCtrl,this,"table",[`BrowseQuery -GUI -catalog="${amiWebApp.textToString(this.ctx.defaultCatalog)}" -entity="${amiWebApp.textToString(this.ctx.defaultEntity)}" -mql="${amiWebApp.textToString(this.ctx.mql)}"`],{showDetails:!0,canEdit:this.ctx.canEdit,catalog:this.ctx.defaultCatalog,entity:this.ctx.defaultEntity,primaryField:this.ctx.defaultPrimaryField},this.ctx,"table",this.ctx.defaultEntity)},showMQL:function(){amiWebApp.createControl(this.getParent(),this,"textBox",[this.ctx.mql,{lang:"mql"}])},showJS:function(){amiWebApp.createControl(this.getParent(),this,"textBox",[this.ctx.js,{lang:"javascript"}])},updateExpression:function(){let t=function(e){return e.nodeValue&&e.nodeValue.startsWith("_.")&&(e.nodeValue=e.nodeValue.substring(2)),e.nodeLeft&&t(e.nodeLeft),e.nodeRight&&t(e.nodeRight),e},e=$(this.patchId("#CA15011B_EECA_E9AB_63EE_7A2A467025A5")).val();if(e){amiWebApp.lock();try{this.ctx.ast=t(new amiTwig.expr.Compiler(e,1).rootNode),this.refresh(),amiWebApp.unlock()}catch(t){$(this.patchId("#CA15011B_EECA_E9AB_63EE_7A2A467025A5")).val(this.dumpAST()),amiWebApp.error(t,!0)}}},addPredicateInAST:function(t){let e=new amiTwig.expr.Node(amiTwig.expr.tokens.TERMINAL,t);if(this.ctx.ast){let t=new amiTwig.expr.Node(amiTwig.expr.tokens.LOGICAL_AND,"and");t.nodeLeft=this.ctx.ast,t.nodeRight=e,this.ctx.ast=t}else this.ctx.ast=e},delPredicateInAST:function(t){let e=this.lookupParentAST(t);if(e)if(e.parent){let t=e.parent,i=e.other;t.nodeType=i.nodeType,t.nodeValue=i.nodeValue,t.nodeLeft=i.nodeLeft,t.nodeRight=i.nodeRight}else this.ctx.ast=null},_lookupParentAST:function(t,e,i,a){if(a.nodeValue===t)return{parent:e,other:i};{let n,s,r;if(a.nodeLeft&&(a.nodeRight?(r=a,s=a.nodeRight):(r=e,s=i),n=this._lookupParentAST(t,r,s,a.nodeLeft)))return n;if(a.nodeRight&&(a.nodeLeft?(r=a,s=a.nodeLeft):(r=e,s=i),n=this._lookupParentAST(t,r,s,a.nodeRight)))return n}return null},lookupParentAST:function(t){return this.ctx.ast?this._lookupParentAST(t,null,null,this.ctx.ast):null},_dumpAST:function(t,e,i){let a,n,s;if(t.nodeLeft&&t.nodeRight)return a=this._dumpAST(t.nodeLeft,e,i),n=this._dumpAST(t.nodeRight,e,i),a?n?(s=[],s.push(a),s.push(t.nodeValue),s.push(n),`(${s.join(" ")})`):a:n;if(null===t.nodeLeft&&null!==t.nodeRight)return n=this._dumpAST(t.nodeRight,e,i),n?(s=[],s.push(t.nodeValue),s.push(n),`(${s.join(" ")})`):null;if(null!==t.nodeLeft&&null===t.nodeRight)return a=this._dumpAST(t.nodeLeft,e,i),a?(s=[],s.push(a),s.push(t.nodeValue),`(${s.join(" ")})`):null;{let a=t.nodeValue;if(a!==i){if(e){var r=e[a].filter;return r?`(${r})`:null}return a}return null}},dumpAST:function(t,e){let i;return this.ctx.ast&&(i=this._dumpAST(this.ctx.ast,t,e))?i.startsWith("(")&&i.endsWith(")")&&(i=i.substring(1,i.length-1)):i="",i},dumpConstraints:function(t){return t.more.constraints&&t.more.constraints.length>0?`{${t.more.constraints.join()}}`:""},_dumpFilterAST:function(t,e,i){let a=null,n=!1;if(null===e)return{ast:a,predicateFound:n};let s=null,r=null,l=!1,o=!1;if(null===e.nodeLeft&&null===e.nodeRight)return e.nodeValue===t?(a=null,n=!0):a=new amiTwig.expr.Node(amiTwig.expr.tokens.TERMINAL,e.nodeValue),{ast:a,predicateFound:n};if(null!==e.nodeLeft){let a=this._dumpFilterAST(t,e.nodeLeft,i);s=a.ast,l=a.predicateFound}if(null!==e.nodeRight){let a=this._dumpFilterAST(t,e.nodeRight,i);r=a.ast,o=a.predicateFound}return"and"===e.nodeValue?(null!==s&&null!==r?(a=new amiTwig.expr.Node(amiTwig.expr.tokens.LOGICAL_AND,"and"),a.nodeLeft=s,a.nodeRight=r):a=null!==s?s:null!==r?r:null,n=l||o,{ast:a,predicateFound:n}):"or"===e.nodeValue?(!1===l&&!1===o?null!==s&&null!==r?(a=new amiTwig.expr.Node(amiTwig.expr.tokens.LOGICAL_OR,"or"),a.nodeLeft=s,a.nodeRight=r):a=null!==s?s:null!==r?r:null:!0===l&&!0===o?(a=new amiTwig.expr.Node(amiTwig.expr.tokens.LOGICAL_OR,"or"),a.nodeLeft=s,a.nodeRight=r):!0===l?a=s:!0===o&&(a=r),n=l||o,{ast:a,predicateFound:n}):"not"===e.nodeValue?(a=!1===o?null!==r?r:null:r,{ast:a,predicateFound:o}):void 0},dumpFilterAST:function(t){let e=this._dumpFilterAST(t,this.ctx.ast,this.ctx.predicates),i="";return null!==e.ast&&((i=this._dumpAST(e.ast,this.ctx.predicates))?i.startsWith("(")&&i.endsWith(")")&&(i=i.substring(1,i.length-1)):i=""),i}})})()})();