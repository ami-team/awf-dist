(()=>{"use strict";var t={444:(t,e,n)=>{n.d(e,{A:()=>d});var i=n(9547),a=n.n(i),s=n(8532),o=n.n(s)()(a());o.push([t.id,"#BBD391C7_759D_01DD_E234_488D46504638 table th,\n#BBD391C7_759D_01DD_E234_488D46504638 table td,\n#BBD391C7_759D_01DD_E234_488D46504638 table span {\n\tfont-size: 14px;\n\twhite-space: nowrap;\n}\n",""]);const d=o},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},1113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},5056:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},5072:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var s={},o=[],d=0;d<t.length;d++){var r=t[d],l=i.base?r[0]+i.base:r[0],c=s[l]||0,p="".concat(l," ").concat(c);s[l]=c+1;var f=n(p),m={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};if(-1!==f)e[f].references++,e[f].updater(m);else{var h=a(m,i);i.byIndex=d,e.splice(d,0,{identifier:p,updater:h,references:1})}o.push(p)}return o}function a(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var s=i(t=t||[],a=a||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var d=n(s[o]);e[d].references--}for(var r=i(t,a),l=0;l<s.length;l++){var c=n(s[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}s=r}}},7659:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},7825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,a&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},8532:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,i,a,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(i)for(var d=0;d<this.length;d++){var r=this[d][0];null!=r&&(o[r]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);i&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),e.push(c))}},e}},9547:t=>{t.exports=function(t){return t[1]}}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var i=n(5072),a=n.n(i),s=n(7825),o=n.n(s),d=n(7659),r=n.n(d),l=n(5056),c=n.n(l),p=n(540),f=n.n(p),m=n(1113),h=n.n(m),u=n(444),b={};b.styleTagTransform=h(),b.setAttributes=c(),b.insert=r().bind(null,"head"),b.domAPI=o(),b.insertStyleElement=f();a()(u.A,b);u.A&&u.A.locals&&u.A.locals;$AMIClass("ElementInfoCtrl",{$extends:ami.Control,$init:function(t,e){this.$super.$init(t,e)},onReady:function(){return amiWebApp.loadResources(["ctrl:fieldEditor","ctrl:unitEditor","ctrl:tab"]).done(t=>{this.fragmentElementInfoCtrl='\x3c!-- *************************************************************************************************************** --\x3e\n\n{% if showToolBar %}\n<nav class="navbar navbar-expand-lg navbar-light bg-light rounded-top border mb-1" style="padding: 0.1rem 0.75rem 0.1rem 1.0rem;">\n\n\t<span class="navbar-brand" data-bs-toggle="tooltip" data-bs-placement="bottom" title="{{catalog|e}}::{{entity|e}}">\n\t\t<i class="bi bi-info-circle"></i>\n\t</span>\n\n\t<button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#E0C44E70_07E8_24BC_72DD_DCB120E25FAE">\n\t\t<span class="navbar-toggler-icon"></span>\n\t</button>\n\n\t<div class="collapse navbar-collapse" id="E0C44E70_07E8_24BC_72DD_DCB120E25FAE">\n\n\t\t<div class="form-inline m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-sm-2 my-2 my-lg-0">\n\t\t\t<button id="ACFEDF15_7894_6D91_CBE7_D98B5F7E9C6A" type="button" class="btn btn-outline-secondary m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-2"><i class="bi bi-arrow-repeat"></i></button>\n\t\t</div>\n\n\t\t<div class="form-inline m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-sm-2 my-2 my-lg-0">\n\t\t\t<span class="switch switch-on-warning switch-off-secondary">\n\t\t\t\t<input type="checkbox" id="D98B6B9A_1D5A_021E_5F90_2B55A6C3BE73" />\n\t\t\t\t<label for="D98B6B9A_1D5A_021E_5F90_2B55A6C3BE73">\n\t\t\t\t\tempty fields\n\t\t\t\t\t<span class="text-secondary"> hidden</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-warning"> shown</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\n\t\t{% if canEdit %}\n\t\t<div class="form-inline m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-sm-2 my-2 my-lg-0">\n\t\t\t<span class="switch switch-on-warning switch-off-secondary">\n\t\t\t\t<input type="checkbox" id="AB84A8CC_5E70_EBE7_8766_317FEE71EFE8"{% if enableEditMode and canEdit %} checked="checked"{% endif %} />\n\t\t\t\t<label for="AB84A8CC_5E70_EBE7_8766_317FEE71EFE8">\n\t\t\t\t\t<span class="text-secondary">view</span>\n\t\t\t\t\t/\n\t\t\t\t\t<span class="text-warning">edit</span>\n\t\t\t\t</label>\n\t\t\t</span>\n\t\t</div>\n\t\t{% endif %}\n\n\t\t<ul class="navbar-nav m{% if BOOTSTRAP_VERSION > 4 %}e{% else %}r{% endif %}-sm-2 my-2 my-lg-0">\n\t\t\t<div class="nav-item dropdown">\n\t\t\t\t<a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">More...</a>\n\t\t\t\t<div class="dropdown-menu">\n\t\t\t\t\t<a href="#" class="dropdown-item" id="BF7E7885_DB34_7993_9F17_37990DDD4BF3">View command</a>\n\t\t\t\t\t<div class="dropdown-divider"></div>\n\t\t\t\t\t<a href="#" class="dropdown-item" id="F1232710_45E2_92BF_7378_1BCD05FBF131">View JavaScript</a>\n\t\t\t\t\t<a href="#" class="dropdown-item" id="C28C33B1_9BCE_808C_0E57_4C8704359932">Add to Dashboard</a>\n\t\t\t\t</div>\n\t\t\t<div>\n\t\t</ul>\n\n\t\t<span class="navbar-text m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-auto">\n\t\t\t<button class="btn btn-link" type="button" id="A29F1487_C747_18BF_94B1_9F3C32DA838C" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Bookmark this result">\n\t\t\t\t<i class="bi bi-star-fill text-secondary"></i>\n\t\t\t</button>\n\t\t</span>\n\n{% if isEmbedded %}\n\t\t<span class="navbar-text m{% if BOOTSTRAP_VERSION > 4 %}s{% else %}l{% endif %}-auto d-none d-lg-inline">\n\t\t\t<img src="{{ORIGIN_URL}}/js/assets/images/logo.png" alt="AMI" height="24" />\n\t\t</span>\n{% endif %}\n\n\t</div>\n\n</nav>\n{% endif %}\n\n\x3c!-- *************************************************************************************************************** --\x3e\n\n<div class="pb-4 unit-edit" id="BBD391C7_759D_01DD_E234_488D46504638" style="overflow-x: scroll;"></div>\n\n\x3c!-- *************************************************************************************************************** --\x3e\n',this.fragmentDetails="<table>\n\t<tr>\n\t\t<td class=\"align-top\">\n\n\t\t\t\x3c!-- *************************************************************************************************** --\x3e\n\n\t\t\t<div class=\"card\">\n\t\t\t\t<h5 class=\"card-header text-center p-1\">\n\t\t\t\t\tMetadata\n\t\t\t\t</h5>\n\t\t\t\t<div class=\"card-body p-0\">\n\t\t\t\t\t<table class=\"table table-sm table-striped table-bordered mb-0\">\n\t\t\t\t\t\t{% if elementRowset is not empty %}\n\t\t\t\t\t\t{%   for row in elementRowset %}\n\t\t\t\t\t\t{%     set hasFieldDescriptions = fieldDescriptions.length === row.field.length %}\n\t\t\t\t\t\t{%     for field in row.field %}\n\t\t\t\t\t\t{%       if (showEmptyFields or (field.$ is not empty and field.$ !== '@NULL' and field.$ !== 'N/A')) and not (hasFieldDescriptions and fieldDescriptions[loop.index0]['@hidden'] === 'true') %}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"text-left\">\n\t\t\t\t\t\t\t\t<strong{% if hasFieldDescriptions and fieldDescriptions[loop.index0]['$'] is not empty and fieldDescriptions[loop.index0]['$'] !== 'N/A' %} data-bs-toggle=\"tooltip\" title=\"{{fieldDescriptions[loop.index0]['$']|e}}\"{% endif %}>{{field['@name']|e}}</strong>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class=\"text-center\">\n\t\t\t\t\t\t\t\t{% if field.$ starts with '@OWNER::' %}\n\t\t\t\t\t\t\t\t<a href=\"#\" data-action=\"filter\" data-filter-def=\"{{field.$|slice(8)|e}}\">\n\t\t\t\t\t\t\t\t\t<i class=\"bi bi-link\"></i>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t{% elseif field.$ === '@NOGO' %}\n\t\t\t\t\t\t\t\t<div class=\"font-italic text-danger\">admin only</div>\n\t\t\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t\t\t<div style=\"min-height: 21px; padding-left: 6px; padding-right: 6px;\"\n\t\t\t\t\t\t\t\t     {% if field['properties'] is defined and not (hasFieldDescriptions and fieldDescriptions[loop.index0]['@media'] === 'true') %}\n\t\t\t\t\t\t\t\t     {%   if field['properties']['@id'] %}id=\"{{field['properties']['@id']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t     {%   if field['properties']['@class'] %}class=\"{{field['properties']['@class']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t     {%   if field['properties']['@unitName'] %}data-unit-name=\"{{field['properties']['@unitName']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t     {%   if field['properties']['@unitFactor'] %}data-unit-factor=\"{{field['properties']['@unitFactor']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t     {%   if field['properties']['@unitBase'] %}data-unit-base=\"{{field['properties']['@unitBase']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t     {%   if field['properties']['@humanReadable'] %}data-human-readable=\"{{field['properties']['@humanReadable']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t     data-val=\"{{field.$|e}}\"\n\t\t\t\t\t\t\t\t     {% endif %}\n\t\t\t\t\t\t\t\t     {% if fieldDescriptions[loop.index0]['@automatic'] !== 'true' and fieldDescriptions[loop.index0]['@created'] !== 'true' and fieldDescriptions[loop.index0]['@createdBy'] !== 'true' and fieldDescriptions[loop.index0]['@modified'] !== 'true' and fieldDescriptions[loop.index0]['@modifiedBy'] !== 'true' %}\n\t\t\t\t\t\t\t\t     data-action=\"edit-row\"\n\t\t\t\t\t\t\t\t     data-catalog=\"{{fieldDescriptions[loop.index0]['@catalog']|e}}\"\n\t\t\t\t\t\t\t\t     data-entity=\"{{fieldDescriptions[loop.index0]['@entity']|e}}\"\n\t\t\t\t\t\t\t\t     data-field=\"{{fieldDescriptions[loop.index0]['@field']|e}}\"\n\t\t\t\t\t\t\t\t     data-type=\"{{fieldDescriptions[loop.index0]['@type']|e}}\"\n\t\t\t\t\t\t\t\t     data-primary-catalog=\"{{catalog|e}}\"\n\t\t\t\t\t\t\t\t     data-primary-entity=\"{{entity|e}}\"\n\t\t\t\t\t\t\t\t     data-primary-field=\"{{primaryFieldName|e}}\"\n\t\t\t\t\t\t\t\t     data-primary-value=\"{{primaryFieldValue|e}}\"\n\t\t\t\t\t\t\t\t     {% endif %}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{% if hasFieldDescriptions and fieldDescriptions[loop.index0]['@media'] === 'true' and field.$ !== '@NULL' %}\n\t\t\t\t\t\t\t\t\t<a href=\"#\" class=\"view-media\" data-ctrl=\"{{fieldDescriptions[loop.index0]['@ctrl']}}\" data-ctrl-location=\"container\" data-params=\"[&quot;{{catalog|e('json')|e('html')}}&quot;,&quot;{{entity|e('json')|e('html')}}&quot;,&quot;{{primaryFieldName|e('json')|e('html')}}&quot;,&quot;{{primaryFieldValue|e('json')|e('html')}}&quot;,&quot;{{field['@name']|e('json')|e('html')}}&quot;,&quot;{{fieldDescriptions[loop.index0]['@base64']|e('json')|e('html')}}&quot;,&quot;{{fieldDescriptions[loop.index0]['@mime']|e('json')|e('html')}}&quot;]\" data-settings=\"{}\" data-icon=\"picture-o\" data-title=\"media\"><i class=\"bi bi-zoom-in\"></i></a> {{fieldDescriptions[loop.index0]['@mime']|e}}\n\t\t\t\t\t\t\t\t\t{% elseif hasFieldDescriptions and fieldDescriptions[loop.index0]['@json'] === 'true' %}\n\t\t\t\t\t\t\t\t\t<a href=\"#\" class=\"view-more\" data-ctrl=\"textBox\" data-ctrl-location=\"body\" data-params=\"[&quot;{{field.$|e('json')|e}}&quot;]\" data-settings=\"{&quot;mode&quot;:&quot;json&quot;}\"><i class=\"bi bi-zoom-in\"></i></a> {{field.$|slice(0, maxCellLength)|e}}…\n\t\t\t\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t\t\t\t{%   if (field.$|length) > maxCellLength %}\n\t\t\t\t\t\t\t\t\t<a href=\"#\" class=\"view-more\" data-ctrl=\"textBox\" data-ctrl-location=\"body\" data-params=\"[&quot;{{field.$|e('json')|e('html')}}&quot;]\" data-settings=\"{}\"><i class=\"bi bi-zoom-in\"></i></a> {{field.$|slice(0, maxCellLength)|e}}…\n\t\t\t\t\t\t\t\t\t{%   else %}\n\t\t\t\t\t\t\t\t\t{%     if     field.$ === '@LONG' %}\n\t\t\t\t\t\t\t\t\t<div class=\"font-italic text-secondary\">long value</div>\n\t\t\t\t\t\t\t\t\t{%     elseif field.$ === '@NULL' %}\n\t\t\t\t\t\t\t\t\t<div class=\"font-italic text-secondary\">null value</div>\n\t\t\t\t\t\t\t\t\t{%     else %}\n\t\t\t\t\t\t\t\t\t{{field.$|e}}\n\t\t\t\t\t\t\t\t\t{%     endif %}\n\t\t\t\t\t\t\t\t\t{%   endif %}\n\t\t\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{%   if field['links'] is defined %}\n\t\t\t\t\t\t\t\t{%     for link in field['links'] %}\n\t\t\t\t\t\t\t\t{%       if not loop.first %} - {% endif %}\n\t\t\t\t\t\t\t\t<{% if link['@href'] or link['@data-ctrl'] %}a href=\"{{link['@href']|e}}\"{% else %}span{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@target'] %}target=\"{{link['@target']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@id'] %}id=\"{{link['@id']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@class'] %}class=\"{{link['@class']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@data-ctrl'] %}data-ctrl=\"{{link['@data-ctrl']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@data-ctrl-location'] %}data-ctrl-location=\"{{link['@data-ctrl-location']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@data-params'] %}data-params=\"{{link['@data-params']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@data-settings'] %}data-settings=\"{{link['@data-settings']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@data-icon'] %}data-icon=\"{{link['@data-icon']|e}}\"{% endif %}\n\t\t\t\t\t\t\t\t   {% if link['@data-title'] %}data-title=\"{{link['@data-title']|e}}\"{% endif %}>\n\t\t\t\t\t\t\t\t\t{% if link['@escape'] === 'true' %}\n\t\t\t\t\t\t\t\t\t{{link['@label']|e}}\n\t\t\t\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t\t\t\t{{link['@label']}}\n\t\t\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t\t    </{% if link['@href'] %}a{% else %}span{% endif %}>\n\t\t\t\t\t\t\t\t{%     endfor %}\n\t\t\t\t\t\t\t\t{%   endif %}\n\t\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{%       endif %}\n\t\t\t\t\t\t{%     endfor %}\n\t\t\t\t\t\t{%   endfor %}\n\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"text-center text-warning\">empty element</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- *************************************************************************************************** --\x3e\n\n\t\t</td>\n\n\t\t<td>&nbsp</td>\n\n\t\t<td class=\"align-top\">\n\n\t\t\t\x3c!-- *************************************************************************************************** --\x3e\n\n\t\t\t<div class=\"card\">\n\t\t\t\t<h5 class=\"card-header text-center p-1\">\n\t\t\t\t\tLinked Entities\n\t\t\t\t</h5>\n\t\t\t\t<div class=\"card-body p-0\">\n\t\t\t\t\t<table class=\"table table-sm table-striped table-bordered mb-0\">\n\t\t\t\t\t\t{% if linkedElementRowset is not empty %}\n\t\t\t\t\t\t{%   for row in linkedElementRowset %}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"text-center\">\n\t\t\t\t\t\t\t\t{% if     (row|json_jspath('..field{.@name===\"direction\"}.$')[0]) === 'forward' %}\n\t\t\t\t\t\t\t\t<i class=\"bi bi-arrow-right\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"forward foreign key\"></i>\n\t\t\t\t\t\t\t\t{% elseif (row|json_jspath('..field{.@name===\"direction\"}.$')[0]) === 'backward' %}\n\t\t\t\t\t\t\t\t<i class=\"bi bi-arrow-left\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"backward foreign key\"></i>\n\t\t\t\t\t\t\t\t{% elseif (row|json_jspath('..field{.@name===\"direction\"}.$')[0]) === 'bridge' %}\n\t\t\t\t\t\t\t\t<i class=\"bi bi-arrow-left-right\" data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"bridge\"></i>\n\t\t\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class=\"text-center\">\n\t\t\t\t\t\t\t\t<a href=\"#\" data-ctrl=\"table\" data-ctrl-location=\"container\" data-params=\"[&quot;BrowseQuery -catalog=\\&quot;{{row|json_jspath('..field{.@name===\"catalog\"}.$')[0]|e('json')|e('html')}}\\&quot; -entity=\\&quot;{{row|json_jspath('..field{.@name===\"entity\"}.$')[0]|e('json')|e('html')}}\\&quot; -mql=\\&quot;{{row|json_jspath('..field{.@name===\"mql\"}.$')[0]|e('json')|e('html')}}\\&quot;&quot;]\" data-settings=\"{&quot;catalog&quot;:&quot;{{row|json_jspath('..field{.@name===\"catalog\"}.$')[0]|e('json')|e('html')}}&quot;,&quot;entity&quot;:&quot;{{row|json_jspath('..field{.@name===\"entity\"}.$')[0]|e('json')|e('html')}}&quot;,&quot;orderBy&quot;:&quot;&quot;,&quot;orderWay&quot;:&quot;&quot;}\" data-icon=\"table\" data-title=\"{{row|json_jspath('..field{.@name===\"entity\"}.$')[0]|e}}\">\n\t\t\t\t\t\t\t\t\t<span data-bs-toggle=\"tooltip\" data-boundary=\"window\" title=\"via {{row|json_jspath('..field{.@name===\"constraint\"}.$')[0]|e}}\">\n\t\t\t\t\t\t\t\t\t\t{{row|json_jspath('..field{.@name===\"entity\"}.$')[0]|e}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t<td class=\"text-center\">\n\t\t\t\t\t\t\t\t{{row|json_jspath('..field{.@name===\"count\"}.$')[0]|e}} record(s)\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{%   endfor %}\n\t\t\t\t\t\t{% else %}\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td class=\"text-center\">no linked entity</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t{% endif %}\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t\x3c!-- *************************************************************************************************** --\x3e\n\n\t\t\t{% if expandedLinkedElements is not empty %}\n\t\t\t{%   for expandedLinkedElement in expandedLinkedElements %}\n\t\t\t{%     if expandedLinkedElement.rows is not empty %}\n\t\t\t<div class=\"card mt-1\">\n\t\t\t\t<h5 class=\"card-header text-center p-1\">\n\t\t\t\t\t{{expandedLinkedElement.entity}}\n\t\t\t\t</h5>\n\t\t\t</div>\n\t\t\t<div class=\"card-body p-0\">\n\t\t\t\t<table class=\"table table-sm table-striped table-bordered mb-0\">\n\t\t\t\t\t{% if expandedLinkedElement.keyValMode === true %}\n\t\t\t\t\t{%   for row in expandedLinkedElement.rows %}\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{% for field in expandedLinkedElement.fields %}\n\t\t\t\t\t\t<td class=\"text-center\">{{row|json_jspath('..field{.@name===\"' + field + '\"}.$')[0]|e}}</td>\n\t\t\t\t\t\t{% endfor %}\n\t\t\t\t\t</tr>\n\t\t\t\t\t{%   endfor %}\n\t\t\t\t\t{% else %}\n\t\t\t\t\t{%   for row in expandedLinkedElement.rows %}\n\t\t\t\t\t{%     for field in row.fields %}\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td class=\"text-center\">{{field|e}}</td>\n\t\t\t\t\t\t<td class=\"text-center\">{{row|json_jspath('..field{.@name===\"' + field + '\"}.$')[0]|e}}</td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t{%     endfor %}\n\t\t\t\t\t{%   endfor %}\n\t\t\t\t\t{% endif %}\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t\t{%     endif %}\n\t\t\t{%   endfor %}\n\t\t\t{% endif %}\n\n\t\t\t\x3c!-- *************************************************************************************************** --\x3e\n\t\t</td>\n\t</tr>\n</table>\n",this.fragmentJS="<script type=\"text/javascript\" src=\"{{ORIGIN_URL}}/js/jquery.min.js\"><\/script>\n\n<script type=\"text/javascript\" src=\"{{ORIGIN_URL}}/js/ami.min.js?bootstrap={{BOOTSTRAP_VERSION}}&embedded\"><\/script>\n\n<script type=\"text/javascript\">\n\n\tvar myElementInfo;\n\n\tamiWebApp.onRefresh = function(isAuth) {\n\n\t\tif(isAuth)\n\t\t{\n\t\t\tmyElementInfo.render('#myElementInfo', '{{ immutables.catalog|e('js') }}', '{{ immutables.entity|e('js') }}', '{{ immutables.primaryFieldName|e('js') }}', '{{ immutables.primaryFieldValue|e('js') }}', {\n\t\t\t\telementInfoCommandFunc: {{ options.elementInfoCommandFunc.toString() }},\n\t\t\t\t/**/\n\t\t\t\tenableCache: {{ options.enableCache }},\n\t\t\t\t/**/\n\t\t\t\texpandedLinkedElements: [{{ options.expandedLinkedElements|join(', ')|e('js') }}],\n\t\t\t\t/**/\n\t\t\t\tshowPrimaryField: {{ options.showPrimaryField }},\n\t\t\t\tshowToolBar: {{ options.showToolBar }},\n\t\t\t\tcanEdit: {{ options.canEdit }},\n\t\t\t\t/**/\n\t\t\t\tenableEditMode: {{ options.enableEditMode }},\n\t\t\t\t/**/\n\t\t\t\thideBigContent: {{ options.hideBigContent }},\n\t\t\t\tmaxCellLength: {{ options.maxCellLength }},\n\t\t\t\t/**/\n\t\t\t\tcard: {{ options.card }},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('#myElementInfo').empty();\n\t\t}\n\t};\n\n\tamiWebApp.onReady = function() {\n\n\t\treturn amiWebApp.loadResources(['ctrl:elementInfo']).done(function(ctrls) {\n\n\t\t\tmyElementInfo = new ctrls[0];\n\t\t});\n\t};\n\n\tamiWebApp.start({\n\t\tendpoint_url: '{{endpoint}}'\n\t});\n\n<\/script>\n\n\x3c!-- Add your own style --\x3e\n<ul id=\"ami_login_menu_content\"></ul>\n\n<div id=\"myElementInfo\"></div>\n",this.fieldEditorCtor=t[0],this.fieldUnitCtor=t[1],this.tabCtor=t[2]})},render:function(t,e,n,i,a,s){const o=$.Deferred(),d=amiLogin.hasRole("AMI_ADMIN")||amiLogin.hasRole("AMI_WRITER");return this.setupCtx({catalog:e,entity:n,primaryFieldName:i,primaryFieldValue:a},{context:o,elementInfoCommandFunc:(t,e,n,i,a)=>`GetElementInfo -catalog="${amiWebApp.textToString(t)}" -entity="${amiWebApp.textToString(e)}" -primaryFieldName="${amiWebApp.textToString(n)}" -primaryFieldValue="${amiWebApp.textToString(i)}"${a?" -hideBigContent":""}`,enableCache:!1,expandedLinkedElements:[],showPrimaryField:!0,showToolBar:!0,canEdit:d,enableEditMode:!1,hideBigContent:!0,maxCellLength:64,card:!1,onRefresh:null},s),this.fieldEditor=new this.fieldEditorCtor(this,this),this.unitEditor=new this.fieldUnitCtor(this,this),this._render(o,t),o},_render:function(t,e){if("TabCtrl"!==this.getParent().$name){const n=new this.tabCtor(null,this);n.render(e,this.ctx).done(()=>{n.appendItem(`<i class="bi bi-arrows-fullscreen"></i> ${this.ctx.entity}`,{closable:!1,firstVisible:this.ctx.card}).done(e=>{this.setParent(n),this.__render(t,e)})})}else this.__render(t,e)},__render:function(t,e){this.replaceHTML(e,this.fragmentElementInfoCtrl,{dict:this.ctx}).done(()=>{$(this.patchId("#ACFEDF15_7894_6D91_CBE7_D98B5F7E9C6A")).click(()=>{amiWebApp.lock(),this.refresh().done(()=>{amiWebApp.unlock()}).fail(t=>{amiWebApp.error(t,!0)})}),$(this.patchId("#D98B6B9A_1D5A_021E_5F90_2B55A6C3BE73")).change(()=>{amiWebApp.lock(),this.refresh().done(()=>{amiWebApp.unlock()}).fail(t=>{amiWebApp.error(t,!0)})}),$(this.patchId("#AB84A8CC_5E70_EBE7_8766_317FEE71EFE8")).change(()=>{this.setMode()}),$(this.patchId("#BF7E7885_DB34_7993_9F17_37990DDD4BF3")).click(()=>{amiWebApp.createControl(this.getParent(),this,"textBox",[this.ctx.command,{lang:"shell"}])}),$(this.patchId("#F1232710_45E2_92BF_7378_1BCD05FBF131")).click(()=>{amiWebApp.createControl(this.getParent(),this,"textBox",[this.ctx.js,{lang:"javascript"}])}),$(this.patchId("#A29F1487_C747_18BF_94B1_9F3C32DA838C")).click(()=>{amiWebApp.createControl(this.getParent(),this,"bookmarkBox",["ElementInfoViewer",this.ctx])}),$(this.patchId("#C28C33B1_9BCE_808C_0E57_4C8704359932")).click(()=>{const t=[this.ctxImmutables.catalog,this.ctxImmutables.entity,this.ctxImmutables.primaryFieldName,this.ctxImmutables.primaryFieldValue],e={...this.ctxOptionals,card:!1},n=confirm("Auto-refresh new widget?");amiWebApp.lock(),amiCommand.execute('AddWidget -control="ElementInfo" -params=? -settings=? -transparent'+(n?" -autoRefresh":""),{params:[JSON.stringify(t),JSON.stringify(e)]}).done((t,e)=>{amiWebApp.success(e)}).fail((t,e)=>{amiWebApp.error(e)})}),this.ctx.js=amiWebApp.formatTWIG(this.fragmentJS,{immutables:this.ctxImmutables,options:this.ctxOptions}),this.refresh().done((e,n,i)=>{t.resolveWith(this.ctx.context,[e,n,i])}).fail(e=>{t.rejectWith(this.ctx.context,[e])})})},refresh:function(t){amiWebApp.lock();const e=$.Deferred(),n=amiWebApp.setupParams({},{context:e},t),i=[];return this.ctx.expandedLinkedElements.forEach(t=>{const e=amiWebApp.textToString(t.catalog),n=amiWebApp.textToString(t.entity);i.push(`${e}.${n}`)}),this.ctx.command=`${this.ctx.elementInfoCommandFunc(this.ctx.catalog,this.ctx.entity,this.ctx.primaryFieldName,this.ctx.primaryFieldValue,this.ctx.hideBigContent)} -expandedLinkedElements="${i.join(",")}"`,amiCommand.execute(this.ctx.command).done(t=>{const i=amiWebApp.jspath("..fieldDescription",t),a=amiWebApp.jspath('..rowset{.@type==="element" || .@type==="Element_Info"}.row',t),s=amiWebApp.jspath('..rowset{.@type==="linked_elements" || .@type==="Element_Child"}.row',t),o=[];this.ctx.expandedLinkedElements.forEach(e=>{o.push({catalog:e.catalog,entity:e.entity,fields:e.fields,keyValMode:e.keyValMode,rows:amiWebApp.jspath(`..rowset{.@type==="${e.entity}"}.row`,t)})});const d={...this.ctx,fieldDescriptions:i,elementRowset:a,linkedElementRowset:s,expandedLinkedElements:o,showEmptyFields:$(this.patchId("#D98B6B9A_1D5A_021E_5F90_2B55A6C3BE73")).prop("checked")};this.replaceHTML(this.patchId("#BBD391C7_759D_01DD_E234_488D46504638"),this.fragmentDetails,{dict:d}).done(()=>{this.fieldEditor.setup(this.patchId("#BBD391C7_759D_01DD_E234_488D46504638"),this.ctx),this.unitEditor.setup(this.patchId("#BBD391C7_759D_01DD_E234_488D46504638")),$(this.patchId("#BBD391C7_759D_01DD_E234_488D46504638")).find("[data-ctrl]").click(t=>{t.preventDefault(),this.createControlFromWebLink(this.getParent(),t.currentTarget,this.ctx,{})}),this.ctx.onRefresh&&this.ctx.onRefresh(this),amiWebApp.unlock(),e.resolveWith(n.context,[i,a,s,o])})}).fail((t,i)=>{amiWebApp.unlock(),e.rejectWith(n.context,[i])}),e},isInEditMode:function(){return this.fieldEditor.isInEditMode()},setMode:function(){const t=$(this.patchId("#BBD391C7_759D_01DD_E234_488D46504638")),e=t.find(".view-more"),n=t.find(".view-media");$(this.patchId("#AB84A8CC_5E70_EBE7_8766_317FEE71EFE8")).prop("checked")?(e.hide(),n.hide(),this.fieldEditor.setInEditMode(!0),this.unitEditor.setInEditMode(!0)):(e.show(),n.show(),this.fieldEditor.setInEditMode(!1),this.unitEditor.setInEditMode(!1))}})})();