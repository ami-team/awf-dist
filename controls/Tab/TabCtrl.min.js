(()=>{"use strict";const t='<li class="nav-item" role="presentation">\n\t<a class="nav-link" href="#{{ id|e }}" role="tab" data-bs-toggle="tab">\n\t\t{{ title }}{% if closable %} <i class="bi bi-x"></i>{% endif %}\n\t</a>\n</li>\n',e='<div class="tab-pane" id="{{ id|e }}" role="tabpanel" tabindex="0" style="height: {{ height }};"></div>\n';$AMIClass("TabCtrl",{$extends:ami.Control,$implements:[ami.IContainer],$init:function(t,e){this.$super.$init(t,e),this._previousActiveTab="",this._cnt=0},onReady:function(){return $.Deferred().resolve()},render:function(t,e){const i=$.Deferred();return this.setupCtx({},{context:i,card:!0,closable:!0,firstVisible:!0},e),this.replaceHTML(this.setSelector(t),'{% if card %}\n<div class="card">\n\t<div class="card-header">\n\t\t<ul class="nav nav-tabs card-header-tabs" role="tablist"></ul>\n\t</div>\n\t<div class="card-body">\n\t\t<div class="tab-content"></div>\n\t</div>\n</div>\n{% else %}\n\t<ul class="nav nav-tabs mb-2"></ul>\n\t<div class="tab-content"></div>\n{% endif %}\n',{dict:this.ctx}).done((()=>{i.resolveWith(this.ctx.context)})),i.promise()},_getTabEl:function(t){return $(`${this.getSelector()} .nav-link[href="#${t}"]:parent`)},_getLinkEl:function(t){return $(`${this.getSelector()} .nav-link[href="#${t}"]`)},_getPaneEl:function(t){return $(`${this.getSelector()} .tab-pane#${t}`)},_xxxItem:function(i,n,s){const a=$.Deferred(),r=amiWebApp.setupParams({},{context:a,height:"auto",active:!0,closable:this.ctx.closable,firstVisible:this.ctx.firstVisible},s),c=`${this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")}_${this._cnt}`,l={id:c,title:n,height:r.height,closable:r.closable};let o,h;const d=this.ctx.card?`${this.getSelector()} > .card > .card-header > .nav-tabs`:`${this.getSelector()} > .nav-tabs`,b=this.ctx.card?`${this.getSelector()} > .card > .card-body > .tab-content`:`${this.getSelector()} > .tab-content`;return 0===i?(o=this.prependHTML(d,t,{dict:l}),h=this.prependHTML(b,e,{dict:l})):(o=this.appendHTML(d,t,{dict:l}),h=this.appendHTML(b,e,{dict:l})),o.done((()=>{h.done((()=>{this._getLinkEl(c).on("show.bs.tab",(t=>{this._previousActiveTab=t.relatedTarget?$(t.relatedTarget).attr("href").substring(1):""})),this._getTabEl(c).find(".bi-x").click((t=>{this.removeItem(c),t.preventDefault()})),(0==this._cnt++||r.active)&&this._getLinkEl(c).tab("show"),1===$(`${d} > .nav-item`).length&&!1===r.firstVisible?$(d).hide():$(d).show(),a.resolveWith(r.context,[`#${c}`])}))})),a.promise()},prependItem:function(t,e){return this._xxxItem(0,t,e)},appendItem:function(t,e){return this._xxxItem(1,t,e)},removeItem:function(t){this._getTabEl(t).remove(),this._getPaneEl(t).remove(),this._previousActiveTab?this._getLinkEl(this._previousActiveTab).tab("show"):$(`${this.getSelector()} .nav-link:first`).tab("show")},removeAllItems:function(){$(`${this.getSelector()} .nav-tabs`).empty(),$(`${this.getSelector()} .tab-content`).empty()},isEmpty:function(){return $(`${this.getSelector()} .nav-tabs`).is(":empty")||$(`${this.getSelector()} .nav-content`).is(":empty")}})})();