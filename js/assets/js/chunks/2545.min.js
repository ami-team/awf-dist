/*!
 * AMI Web Framework (AWF) 2.0.0
 *
 * Copyright (c) 2014-2023 CNRS/LPSC
 *
 * Author: Jerome Odier (jerome.odier@lpsc.in2p3.fr)
 *
 * Repositories: https://gitlab.in2p3.fr/ami-team/AMIWebFramework/
 *               https://www.github.com/ami-team/AMIWebFramework/
 *
 * This software is a computer program whose purpose is to provide an
 * HTTP / JavaScript framework to the ATLAS Metadata Interface (AMI)
 * ecosystem.
 *
 * This software is governed by the CeCILL-C license under French law and
 * abiding by the rules of distribution of free software. You can use,
 * modify and/or redistribute the software under the terms of the CeCILL-C
 * license as circulated by CEA, CNRS and INRIA at the following URL
 * "http://www.cecill.info".
 *
 * The fact that you are presently reading this means that you have had
 * knowledge of the CeCILL-C license and that you accept its terms.
 *
 */
"use strict";(self.webpackChunkawf=self.webpackChunkawf||[]).push([[2545],{2545:(e,t,n)=>{n.r(t),n.d(t,{completeFromSchema:()=>Ae,xml:()=>Qe,xmlLanguage:()=>Je});var r=n(7941),o=n(3740);function a(e){return 45==e||46==e||58==e||e>=65&&e<=90||95==e||e>=97&&e<=122||e>=161}let s=null,i=null,l=0;function O(e,t){let n=e.pos+t;if(i==e&&l==n)return s;for(;9==(r=e.peek(t))||10==r||13==r||32==r;)t++;var r;let o="";for(;;){let n=e.peek(t);if(!a(n))break;o+=String.fromCharCode(n),t++}return i=e,l=n,s=o||null}function c(e,t){this.name=e,this.parent=t,this.hash=t?t.hash:0;for(let t=0;t<e.length;t++)this.hash+=(this.hash<<4)+e.charCodeAt(t)+(e.charCodeAt(t)<<8)}const p=new r.IK({start:null,shift:(e,t,n,r)=>1==t?new c(O(r,1)||"",e):e,reduce:(e,t)=>11==t&&e?e.parent:e,reuse(e,t,n,r){let o=t.type.id;return 1==o||13==o?new c(O(r,1)||"",e):e},hash:e=>e?e.hash:0,strict:!1}),u=new r.Jq(((e,t)=>{if(60==e.next)if(e.advance(),47==e.next){e.advance();let n=O(e,0);if(!n)return e.acceptToken(5);if(t.context&&n==t.context.name)return e.acceptToken(2);for(let r=t.context;r;r=r.parent)if(r.name==n)return e.acceptToken(3,-2);e.acceptToken(4)}else if(33!=e.next&&63!=e.next)return e.acceptToken(1)}),{contextual:!0});function h(e,t){return new r.Jq((n=>{for(let r=0,o=0;;o++){if(n.next<0){o&&n.acceptToken(e);break}if(n.next==t.charCodeAt(r)){if(r++,r==t.length){o>=t.length&&n.acceptToken(e,1-t.length);break}}else r=n.next==t.charCodeAt(0)?1:0;n.advance()}}))}const d=h(35,"--\x3e"),f=h(36,"?>"),m=h(37,"]]>"),g=(0,o.Gv)({Text:o.pJ.content,"StartTag StartCloseTag EndTag SelfCloseEndTag":o.pJ.angleBracket,TagName:o.pJ.tagName,"MismatchedCloseTag/Tagname":[o.pJ.tagName,o.pJ.invalid],AttributeName:o.pJ.attributeName,AttributeValue:o.pJ.attributeValue,Is:o.pJ.definitionOperator,"EntityReference CharacterReference":o.pJ.character,Comment:o.pJ.blockComment,ProcessingInst:o.pJ.processingInstruction,DoctypeDecl:o.pJ.documentMeta,Cdata:o.pJ.special(o.pJ.string)}),y=r.WQ.deserialize({version:14,states:",SOQOaOOOrOxO'#CfOzOpO'#CiO!tOaO'#CgOOOP'#Cg'#CgO!{OrO'#CrO#TOtO'#CsO#]OpO'#CtOOOP'#DS'#DSOOOP'#Cv'#CvQQOaOOOOOW'#Cw'#CwO#eOxO,59QOOOP,59Q,59QOOOO'#Cx'#CxO#mOpO,59TO#uO!bO,59TOOOP'#C{'#C{O$TOaO,59RO$[OpO'#CoOOOP,59R,59ROOOQ'#C|'#C|O$dOrO,59^OOOP,59^,59^OOOS'#C}'#C}O$lOtO,59_OOOP,59_,59_O$tOpO,59`O$|OpO,59`OOOP-E6t-E6tOOOW-E6u-E6uOOOP1G.l1G.lOOOO-E6v-E6vO%UO!bO1G.oO%UO!bO1G.oO%dOpO'#CkO%lO!bO'#CyO%zO!bO1G.oOOOP1G.o1G.oOOOP1G.w1G.wOOOP-E6y-E6yOOOP1G.m1G.mO&VOpO,59ZO&_OpO,59ZOOOQ-E6z-E6zOOOP1G.x1G.xOOOS-E6{-E6{OOOP1G.y1G.yO&gOpO1G.zO&gOpO1G.zOOOP1G.z1G.zO&oO!bO7+$ZO&}O!bO7+$ZOOOP7+$Z7+$ZOOOP7+$c7+$cO'YOpO,59VO'bOpO,59VO'jO!bO,59eOOOO-E6w-E6wO'xOpO1G.uO'xOpO1G.uOOOP1G.u1G.uO(QOpO7+$fOOOP7+$f7+$fO(YO!bO<<GuOOOP<<Gu<<GuOOOP<<G}<<G}O'bOpO1G.qO'bOpO1G.qO(eO#tO'#CnOOOO1G.q1G.qO(sOpO7+$aOOOP7+$a7+$aOOOP<<HQ<<HQOOOPAN=aAN=aOOOPAN=iAN=iO'bOpO7+$]OOOO7+$]7+$]OOOO'#Cz'#CzO({O#tO,59YOOOO,59Y,59YOOOP<<G{<<G{OOOO<<Gw<<GwOOOO-E6x-E6xOOOO1G.t1G.t",stateData:")Z~OPQOSVOTWOVWOWWOXWOiXOxPO}TO!PUO~OuZOw]O~O^`Oy^O~OPQOQcOSVOTWOVWOWWOXWOxPO}TO!PUO~ORdO~P!SOseO|gO~OthO!OjO~O^lOy^O~OuZOwoO~O^qOy^O~O[vO`sOdwOy^O~ORyO~P!SO^{Oy^O~OseO|}O~OthO!O!PO~O^!QOy^O~O[!SOy^O~O[!VO`sOd!WOy^O~Oa!YOy^O~Oy^O[mX`mXdmX~O[!VO`sOd!WO~O^!]Oy^O~O[!_Oy^O~O[!aOy^O~O[!cO`sOd!dOy^O~O[!cO`sOd!dO~Oa!eOy^O~Oy^Oz!gO~Oy^O[ma`madma~O[!jOy^O~O[!kOy^O~O[!lO`sOd!mO~OW!pOX!pOz!rO{!pO~O[!sOy^O~OW!pOX!pOz!vO{!pO~O",goto:"%[wPPPPPPPPPPxxP!OP!UPP!_!iP!oxxxP!u!{#R$Z$j$p$v$|PPPP%SXWORYbXRORYb_t`qru!T!U!bQ!h!YS!o!e!fR!t!nQdRRybXSORYbQYORmYQ[PRn[Q_QQkVjp_krz!R!T!X!Z!^!`!f!i!nQr`QzcQ!RlQ!TqQ!XsQ!ZtQ!^{Q!`!QQ!f!YQ!i!]R!n!eQu`S!UqrU![u!U!bR!b!TQ!q!gR!u!qQbRRxbQfTR|fQiUR!OiSXOYTaRb",nodeNames:"⚠ StartTag StartCloseTag MissingCloseTag StartCloseTag StartCloseTag Document Text EntityReference CharacterReference Cdata Element EndTag OpenTag TagName Attribute AttributeName Is AttributeValue CloseTag SelfCloseEndTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag DoctypeDecl",maxTerm:47,context:p,nodeProps:[["closedBy",1,"SelfCloseEndTag EndTag",13,"CloseTag MissingCloseTag"],["openedBy",12,"StartTag StartCloseTag",19,"OpenTag",20,"StartTag"]],propSources:[g],skippedNodes:[0],repeatNodeCount:8,tokenData:"IX~R!XOX$nXY&kYZ&kZ]$n]^&k^p$npq&kqr$nrs'ssv$nvw(Zw}$n}!O*l!O!P$n!P!Q,{!Q![$n![!].e!]!^$n!^!_1v!_!`Cz!`!aDm!a!bE`!b!c$n!c!}.e!}#P$n#P#QFx#Q#R$n#R#S.e#S#T$n#T#o.e#o%W$n%W%o.e%o%p$n%p&a.e&a&b$n&b1p.e1p4U$n4U4d.e4d4e$n4e$IS.e$IS$I`$n$I`$Ib.e$Ib$Kh$n$Kh%#t.e%#t&/x$n&/x&Et.e&Et&FV$n&FV;'S.e;'S;:j1p;:j;=`&e<%l?&r$n?&r?Ah.e?Ah?BY$n?BY?Mn.e?MnO$nX$uWVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nP%dTVPOv%_w!^%_!_;'S%_;'S;=`%s<%lO%_P%vP;=`<%l%_W&OT{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yW&bP;=`<%l%yX&hP;=`<%l$n_&t_VP{WyUOX$nXY&kYZ&kZ]$n]^&k^p$npq&kqr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZ'zTzYVPOv%_w!^%_!_;'S%_;'S;=`%s<%lO%_~(^VOp(sqs(sst)ht!](s!^;'S(s;'S;=`)b<%lO(s~(vVOp(sqs(st!](s!]!^)]!^;'S(s;'S;=`)b<%lO(s~)bOW~~)eP;=`<%l(s~)kTOp)zq!])z!^;'S)z;'S;=`*f<%lO)z~)}UOp)zq!])z!]!^*a!^;'S)z;'S;=`*f<%lO)z~*fOX~~*iP;=`<%l)zZ*sYVP{WOr$nrs%_sv$nw}$n}!O+c!O!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZ+jYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!a,Y!a;'S$n;'S;=`&e<%lO$nZ,cW|QVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n]-SYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!a-r!a;'S$n;'S;=`&e<%lO$n]-{WdSVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n_.p!O`S^QVP{WOr$nrs%_sv$nw}$n}!O.e!O!P.e!P!Q$n!Q![.e![!].e!]!^$n!^!_%y!_!c$n!c!}.e!}#R$n#R#S.e#S#T$n#T#o.e#o$}$n$}%O.e%O%W$n%W%o.e%o%p$n%p&a.e&a&b$n&b1p.e1p4U.e4U4d.e4d4e$n4e$IS.e$IS$I`$n$I`$Ib.e$Ib$Je$n$Je$Jg.e$Jg$Kh$n$Kh%#t.e%#t&/x$n&/x&Et.e&Et&FV$n&FV;'S.e;'S;:j1p;:j;=`&e<%l?&r$n?&r?Ah.e?Ah?BY$n?BY?Mn.e?MnO$n_1sP;=`<%l.eX1{W{WOq%yqr2esv%yw!a%y!a!bCd!b;'S%y;'S;=`&_<%lO%yX2j]{WOr%ysv%yw}%y}!O3c!O!f%y!f!g4e!g!}%y!}#O9t#O#W%y#W#X@Q#X;'S%y;'S;=`&_<%lO%yX3hV{WOr%ysv%yw}%y}!O3}!O;'S%y;'S;=`&_<%lO%yX4UT}P{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yX4jV{WOr%ysv%yw!q%y!q!r5P!r;'S%y;'S;=`&_<%lO%yX5UV{WOr%ysv%yw!e%y!e!f5k!f;'S%y;'S;=`&_<%lO%yX5pV{WOr%ysv%yw!v%y!v!w6V!w;'S%y;'S;=`&_<%lO%yX6[V{WOr%ysv%yw!{%y!{!|6q!|;'S%y;'S;=`&_<%lO%yX6vV{WOr%ysv%yw!r%y!r!s7]!s;'S%y;'S;=`&_<%lO%yX7bV{WOr%ysv%yw!g%y!g!h7w!h;'S%y;'S;=`&_<%lO%yX7|X{WOr7wrs8isv7wvw8iw!`7w!`!a9W!a;'S7w;'S;=`9n<%lO7wP8lTO!`8i!`!a8{!a;'S8i;'S;=`9Q<%lO8iP9QOiPP9TP;=`<%l8iX9_TiP{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yX9qP;=`<%l7wX9yX{WOr%ysv%yw!e%y!e!f:f!f#V%y#V#W=t#W;'S%y;'S;=`&_<%lO%yX:kV{WOr%ysv%yw!f%y!f!g;Q!g;'S%y;'S;=`&_<%lO%yX;VV{WOr%ysv%yw!c%y!c!d;l!d;'S%y;'S;=`&_<%lO%yX;qV{WOr%ysv%yw!v%y!v!w<W!w;'S%y;'S;=`&_<%lO%yX<]V{WOr%ysv%yw!c%y!c!d<r!d;'S%y;'S;=`&_<%lO%yX<wV{WOr%ysv%yw!}%y!}#O=^#O;'S%y;'S;=`&_<%lO%yX=eT{WxPOr%ysv%yw;'S%y;'S;=`&_<%lO%yX=yV{WOr%ysv%yw#W%y#W#X>`#X;'S%y;'S;=`&_<%lO%yX>eV{WOr%ysv%yw#T%y#T#U>z#U;'S%y;'S;=`&_<%lO%yX?PV{WOr%ysv%yw#h%y#h#i?f#i;'S%y;'S;=`&_<%lO%yX?kV{WOr%ysv%yw#T%y#T#U<r#U;'S%y;'S;=`&_<%lO%yX@VV{WOr%ysv%yw#c%y#c#d@l#d;'S%y;'S;=`&_<%lO%yX@qV{WOr%ysv%yw#V%y#V#WAW#W;'S%y;'S;=`&_<%lO%yXA]V{WOr%ysv%yw#h%y#h#iAr#i;'S%y;'S;=`&_<%lO%yXAwV{WOr%ysv%yw#m%y#m#nB^#n;'S%y;'S;=`&_<%lO%yXBcV{WOr%ysv%yw#d%y#d#eBx#e;'S%y;'S;=`&_<%lO%yXB}V{WOr%ysv%yw#X%y#X#Y7w#Y;'S%y;'S;=`&_<%lO%yXCkT!PP{WOr%ysv%yw;'S%y;'S;=`&_<%lO%yZDTWaQVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n_DvW[UVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZEgYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!aFV!a;'S$n;'S;=`&e<%lO$nZF`W!OQVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$nZGPYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_#P$n#P#QGo#Q;'S$n;'S;=`&e<%lO$nZGvYVP{WOr$nrs%_sv$nw!^$n!^!_%y!_!`$n!`!aHf!a;'S$n;'S;=`&e<%lO$nZHoWwQVP{WOr$nrs%_sv$nw!^$n!^!_%y!_;'S$n;'S;=`&e<%lO$n",tokenizers:[u,d,f,m,0,1,2,3],topRules:{Document:[0,6]},tokenPrec:0});var v,S=n(2064),$=n(5854),w=n(6979),b=n(5882);function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const T=new S.md;function C(e){return $.r$.define({combine:e?t=>t.concat(e):void 0})}class x{constructor(e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r=""),this.data=e,this.name=r,$.yy.prototype.hasOwnProperty("tree")||Object.defineProperty($.yy.prototype,"tree",{get(){return V(this)}}),this.parser=t,this.extension=[R.of(this),$.yy.languageData.of(((e,t,n)=>e.facet(_(e,t,n))))].concat(n)}isActiveAt(e,t,n){return void 0===n&&(n=-1),_(e,t,n)==this.data}findRegions(e){let t=e.facet(R);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(T)==this.data)return void n.push({from:t,to:t+e.length});let o=e.prop(S.md.mounted);if(o){if(o.tree.prop(T)==this.data){if(o.overlay)for(var a,s=P(o.overlay);!(a=s()).done;){let e=a.value;n.push({from:e.from+t,to:e.to+t})}else n.push({from:t,to:t+e.length});return}if(o.overlay){let e=n.length;if(r(o.tree,o.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let o=e.children[n];o instanceof S.mp&&r(o,e.positions[n]+t)}};return r(V(e),0),n}get allowsNesting(){return!0}}function _(e,t,n){let r=e.facet(R);if(!r)return null;let o=r.data;if(r.allowsNesting)for(let r=V(e).topNode;r;r=r.enter(t,n,S.vj.ExcludeBuffers))o=r.type.prop(T)||o;return o}x.setState=$.Py.define();class W extends x{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=C(e.languageData);return new W(t,e.parser.configure({props:[T.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new W(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function V(e){let t=e.field(x.state,!1);return t?t.tree:S.mp.empty}class A{constructor(e,t){void 0===t&&(t=e.length),this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let J=null;class Q{constructor(e,t,n,r,o,a,s,i){void 0===n&&(n=[]),this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=o,this.viewport=a,this.skipped=s,this.scheduleOn=i,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Q(e,t,[],S.mp.empty,0,n,[],null)}startParse(){return this.parser.startParse(new A(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=S.mp.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(S.i9.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(S.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=J;J=this;try{return e()}finally{J=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=X(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:o,viewport:a,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,o)=>t.push({fromA:e,toA:n,fromB:r,toB:o}))),n=S.i9.applyChanges(n,t),r=S.mp.empty,o=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){s=[];for(var i,l=P(this.skipped);!(i=l()).done;){let t=i.value,n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new Q(this.parser,t,n,r,o,a,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:n,to:r}=this.skipped[t];n<e.to&&r>e.from&&(this.fragments=X(this.fragments,n,r),this.skipped.splice(t--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends S._b{createParse(t,n,r){let o=r[0].from,a=r[r.length-1].to;return{parsedPos:o,advance(){let t=J;if(t){for(var n,s=P(r);!(n=s()).done;){let e=n.value;t.tempSkipped.push(e)}e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=a,new S.mp(S.Jq.none,[],[],a-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return J}}function X(e,t,n){return S.i9.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class N{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new N(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Q.create(e.facet(R).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new N(n)}}x.state=$.QQ.define({create:N.init,update(e,t){for(var n,r=P(t.effects);!(n=r()).done;){let e=n.value;if(e.is(x.setState))return e.value}return t.startState.facet(R)!=t.state.facet(R)?N.init(t.state):e.apply(t)}});let E=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(E=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const D="undefined"!=typeof navigator&&(null===(v=navigator.scheduling)||void 0===v?void 0:v.isInputPending)?()=>navigator.scheduling.isInputPending():null,G=w.lg.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(x.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(x.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=E(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,o=n.field(x.state);if(o.tree==o.context.tree&&o.context.isDone(r+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!D?Math.max(25,e.timeRemaining()-5):1e9),s=o.context.treeLen<r&&n.doc.length>r+1e3,i=o.context.work((()=>D&&D()||Date.now()>a),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(i||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:x.setState.of(new N(o.context))})),this.chunkBudget>0&&(!i||s)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>(0,w.OO)(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),R=$.r$.define({combine:e=>e.length?e[0]:null,enables:e=>[x.state,G,w.tk.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class j{constructor(e,t){void 0===t&&(t=[]),this.language=e,this.support=t,this.extension=[e,t]}}$.r$.define(),$.r$.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});const I=new S.md;$.r$.define();const B=new S.md;function q(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const Y=$.Py.define({map:q}),z=$.Py.define({map:q});const U=$.QQ.define({create:()=>w.p.none,update(e,t){e=e.map(t.changes);for(var n,r=P(t.effects);!(n=r()).done;){let t=n.value;t.is(Y)&&!M(e,t.value.from,t.value.to)?e=e.update({add:[H.range(t.value.from,t.value.to)]}):t.is(z)&&(e=e.update({filter:(e,n)=>t.value.from!=e||t.value.to!=n,filterFrom:t.value.from,filterTo:t.value.to}))}if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>w.tk.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],o=e[n++];if("number"!=typeof r||"number"!=typeof o)throw new RangeError("Invalid JSON for fold state");t.push(H.range(r,o))}return w.p.set(t,!0)}});function Z(e,t,n){var r;let o=null;return null===(r=e.field(U,!1))||void 0===r||r.between(t,n,((e,t)=>{(!o||o.from>e)&&(o={from:e,to:t})})),o}function M(e,t,n){let r=!1;return e.between(t,t,((e,o)=>{e==t&&o==n&&(r=!0)})),r}const F={placeholderDOM:null,placeholderText:"…"},L=$.r$.define({combine:e=>(0,$.BO)(e,F)});const H=w.p.replace({widget:new class extends w.l9{toDOM(e){let{state:t}=e,n=t.facet(L),r=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=Z(e.state,n.from,n.to);r&&e.dispatch({effects:z.of(r)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r);let o=document.createElement("span");return o.textContent=n.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=r,o}}});w.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class K{constructor(e,t){let n;function r(e){let t=b.V.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const a="string"==typeof t.all?t.all:t.all?r(t.all):void 0,s=t.scope;this.scope=s instanceof x?e=>e.prop(T)==s.data:s?e=>e==s:void 0,this.style=(0,o.QR)(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:a}).style,this.module=n?new b.V(n):null,this.themeType=t.themeType}static define(e,t){return new K(e,t||{})}}const ee=$.r$.define(),te=$.r$.define({combine:e=>e.length?[e[0]]:null});function ne(e){let t=e.facet(ee);return t.length?t:e.facet(te)}$.Wl.high(w.lg.fromClass(class{constructor(e){this.markCache=Object.create(null),this.tree=V(e.state),this.decorations=this.buildDeco(e,ne(e.state))}update(e){let t=V(e.state),n=ne(e.state),r=n!=ne(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return w.p.none;let n=new $.f_;for(var r,a=P(e.visibleRanges);!(r=a()).done;){let{from:e,to:a}=r.value;(0,o.bW)(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=w.p.mark({class:r})))}),e,a)}return n.finish()}},{decorations:e=>e.decorations})),K.define([{tag:o.pJ.meta,color:"#404740"},{tag:o.pJ.link,textDecoration:"underline"},{tag:o.pJ.heading,textDecoration:"underline",fontWeight:"bold"},{tag:o.pJ.emphasis,fontStyle:"italic"},{tag:o.pJ.strong,fontWeight:"bold"},{tag:o.pJ.strikethrough,textDecoration:"line-through"},{tag:o.pJ.keyword,color:"#708"},{tag:[o.pJ.atom,o.pJ.bool,o.pJ.url,o.pJ.contentSeparator,o.pJ.labelName],color:"#219"},{tag:[o.pJ.literal,o.pJ.inserted],color:"#164"},{tag:[o.pJ.string,o.pJ.deleted],color:"#a11"},{tag:[o.pJ.regexp,o.pJ.escape,o.pJ.special(o.pJ.string)],color:"#e40"},{tag:o.pJ.definition(o.pJ.variableName),color:"#00f"},{tag:o.pJ.local(o.pJ.variableName),color:"#30a"},{tag:[o.pJ.typeName,o.pJ.namespace],color:"#085"},{tag:o.pJ.className,color:"#167"},{tag:[o.pJ.special(o.pJ.variableName),o.pJ.macroName],color:"#256"},{tag:o.pJ.definition(o.pJ.propertyName),color:"#00c"},{tag:o.pJ.comment,color:"#940"},{tag:o.pJ.invalid,color:"#f00"}]);const re=w.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),oe="()[]{}",ae=$.r$.define({combine:e=>(0,$.BO)(e,{afterCursor:!0,brackets:oe,maxScanDistance:1e4,renderMatch:le})}),se=w.p.mark({class:"cm-matchingBracket"}),ie=w.p.mark({class:"cm-nonmatchingBracket"});function le(e){let t=[],n=e.matched?se:ie;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}$.QQ.define({create:()=>w.p.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(ae);for(var o,a=P(t.state.selection.ranges);!(o=a()).done;){let e=o.value;if(!e.empty)continue;let a=ue(t.state,e.head,-1,r)||e.head>0&&ue(t.state,e.head-1,1,r)||r.afterCursor&&(ue(t.state,e.head,1,r)||e.head<t.state.doc.length&&ue(t.state,e.head+1,-1,r));a&&(n=n.concat(r.renderMatch(a,t.state)))}return w.p.set(n,!0)},provide:e=>w.tk.decorations.from(e)});const Oe=new S.md;function ce(e,t,n){let r=e.prop(t<0?S.md.openedBy:S.md.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function pe(e){let t=e.type.prop(Oe);return t?t(e.node):e}function ue(e,t,n,r){void 0===r&&(r={});let o=r.maxScanDistance||1e4,a=r.brackets||oe,s=V(e),i=s.resolveInner(t,n);for(let r=i;r;r=r.parent){let o=ce(r.type,n,a);if(o&&r.from<r.to){let s=pe(r);if(s&&(n>0?t>=s.from&&t<s.to:t>s.from&&t<=s.to))return he(e,t,n,r,s,o,a)}}return function(e,t,n,r,o,a,s){let i=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(i);if(l<0||l%2==0!=n>0)return null;let O={from:n<0?t-1:t,to:n>0?t+1:t},c=e.doc.iterRange(t,n>0?e.doc.length:0),p=0;for(let e=0;!c.next().done&&e<=a;){let a=c.value;n<0&&(e+=a.length);let i=t+e*n;for(let e=n>0?0:a.length-1,t=n>0?a.length:-1;e!=t;e+=n){let t=s.indexOf(a[e]);if(!(t<0||r.resolveInner(i+e,1).type!=o))if(t%2==0==n>0)p++;else{if(1==p)return{start:O,end:{from:i+e,to:i+e+1},matched:t>>1==l>>1};p--}}n>0&&(e+=a.length)}return c.done?{start:O,matched:!1}:null}(e,t,n,s,i.type,o,a)}function he(e,t,n,r,o,a,s){let i=r.parent,l={from:o.from,to:o.to},O=0,c=null==i?void 0:i.cursor();if(c&&(n<0?c.childBefore(r.from):c.childAfter(r.to)))do{if(n<0?c.to<=r.from:c.from>=r.to){if(0==O&&a.indexOf(c.type.name)>-1&&c.from<c.to){let e=pe(c);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(ce(c.type,n,s))O++;else if(ce(c.type,-n,s)){if(0==O){let e=pe(c);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}O--}}}while(n<0?c.prevSibling():c.nextSibling());return{start:l,matched:!1}}const de=Object.create(null),fe=[S.Jq.none],me=(new S.Lj(fe),[]),ge=Object.create(null);for(var ye=0,ve=[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]];ye<ve.length;ye++){let[e,t]=ve[ye];ge[e]=we(de,t)}class Se{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),ge)}resolve(e){return e?this.table[e]||(this.table[e]=we(this.extra,e)):0}}new Se(de);function $e(e,t){me.indexOf(e)>-1||(me.push(e),console.warn(t))}function we(e,t){let n=null;for(var r,a=P(t.split("."));!(r=a()).done;){let t=r.value,a=e[t]||o.pJ[t];a?"function"==typeof a?n?n=a(n):$e(t,`Modifier ${t} used at start of tag`):n?$e(t,`Tag ${t} used as modifier`):n=a:$e(t,`Unknown highlighting tag ${t}`)}if(!n)return 0;let s=t.replace(/ /g,"_"),i=S.Jq.define({id:fe.length,name:s,props:[(0,o.Gv)({[s]:n})]});return fe.push(i),i.id}function be(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){let n=t&&t.getChild("TagName");return n?e.sliceString(n.from,n.to):""}function Te(e,t){let n=t&&t.firstChild;return n&&"OpenTag"==n.name?ke(e,n):""}function Ce(e){for(let t=e&&e.parent;t;t=t.parent)if("Element"==t.name)return t;return null}class xe{constructor(e,t,n){this.attrs=t,this.attrValues=n,this.children=[],this.name=e.name,this.completion=Object.assign(Object.assign({type:"type"},e.completion||{}),{label:this.name}),this.openCompletion=Object.assign(Object.assign({},this.completion),{label:"<"+this.name}),this.closeCompletion=Object.assign(Object.assign({},this.completion),{label:"</"+this.name+">",boost:2}),this.closeNameCompletion=Object.assign(Object.assign({},this.completion),{label:this.name+">"}),this.text=e.textContent?e.textContent.map((e=>({label:e,type:"text"}))):[]}}const _e=/^[:\-\.\w\u00b7-\uffff]*$/;function We(e){return Object.assign(Object.assign({type:"property"},e.completion||{}),{label:e.name})}function Ve(e){return"string"==typeof e?{label:`"${e}"`,type:"constant"}:/^"/.test(e.label)?e:Object.assign(Object.assign({},e),{label:`"${e.label}"`})}function Ae(e,t){let n=[],r=[],o=Object.create(null);for(var a,s=be(t);!(a=s()).done;){let e=a.value,t=We(e);n.push(t),e.global&&r.push(t),e.values&&(o[e.name]=e.values.map(Ve))}let i=[],l=[],O=Object.create(null);for(var c,p=be(e);!(c=p()).done;){let e=c.value,t=r,a=o;e.attributes&&(t=t.concat(e.attributes.map((e=>"string"==typeof e?n.find((t=>t.label==e))||{label:e,type:"property"}:(e.values&&(a==o&&(a=Object.create(a)),a[e.name]=e.values.map(Ve)),We(e))))));let s=new xe(e,t,a);O[s.name]=s,i.push(s),e.top&&l.push(s)}l.length||(l=i);for(let t=0;t<i.length;t++){let n=e[t],r=i[t];if(n.children)for(var u,h=be(n.children);!(u=h()).done;){let e=u.value;O[e]&&r.children.push(O[e])}else r.children=i}return e=>{var t;let{doc:n}=e.state,a=function(e,t){var n;let r=V(e).resolveInner(t,-1),o=null;for(let e=r;!o&&e.parent;e=e.parent)"OpenTag"!=e.name&&"CloseTag"!=e.name&&"SelfClosingTag"!=e.name&&"MismatchedCloseTag"!=e.name||(o=e);if(o&&(o.to>t||o.lastChild.type.isError)){let e=o.parent;if("TagName"==r.name)return"CloseTag"==o.name||"MismatchedCloseTag"==o.name?{type:"closeTag",from:r.from,context:e}:{type:"openTag",from:r.from,context:Ce(e)};if("AttributeName"==r.name)return{type:"attrName",from:r.from,context:o};if("AttributeValue"==r.name)return{type:"attrValue",from:r.from,context:o};let n=r==o||"Attribute"==r.name?r.childBefore(t):r;return"StartTag"==(null==n?void 0:n.name)?{type:"openTag",from:t,context:Ce(e)}:"StartCloseTag"==(null==n?void 0:n.name)&&n.to<=t?{type:"closeTag",from:t,context:e}:"Is"==(null==n?void 0:n.name)?{type:"attrValue",from:t,context:o}:n?{type:"attrName",from:t,context:o}:null}if("StartCloseTag"==r.name)return{type:"closeTag",from:t,context:r.parent};for(;r.parent&&r.to==t&&!(null===(n=r.lastChild)||void 0===n?void 0:n.type.isError);)r=r.parent;return"Element"==r.name||"Text"==r.name||"Document"==r.name?{type:"tag",from:t,context:"Element"==r.name?r:Ce(r)}:null}(e.state,e.pos);if(!a||"tag"==a.type&&!e.explicit)return null;let{type:s,from:c,context:p}=a;if("openTag"==s){let e=l,t=Te(n,p);if(t){let n=O[t];e=(null==n?void 0:n.children)||i}return{from:c,options:e.map((e=>e.completion)),validFor:_e}}if("closeTag"==s){let r=Te(n,p);return r?{from:c,to:e.pos+(">"==n.sliceString(e.pos,e.pos+1)?1:0),options:[(null===(t=O[r])||void 0===t?void 0:t.closeNameCompletion)||{label:r+">",type:"type"}],validFor:_e}:null}if("attrName"==s){let e=O[ke(n,p)];return{from:c,options:(null==e?void 0:e.attrs)||r,validFor:_e}}if("attrValue"==s){let t=function(e,t,n){let r=t&&t.getChildren("Attribute").find((e=>e.from<=n&&e.to>=n)),o=r&&r.getChild("AttributeName");return o?e.sliceString(o.from,o.to):""}(n,p,c);if(!t)return null;let r=O[ke(n,p)],a=((null==r?void 0:r.attrValues)||o)[t];return a&&a.length?{from:c,to:e.pos+('"'==n.sliceString(e.pos,e.pos+1)?1:0),options:a,validFor:/^"[^"]*"?$/}:null}if("tag"==s){let t=Te(n,p),r=O[t],o=[],a=p&&p.lastChild;!t||a&&"CloseTag"==a.name&&ke(n,a)==t||o.push(r?r.closeCompletion:{label:"</"+t+">",type:"type",boost:2});let s=o.concat(((null==r?void 0:r.children)||(p?i:l)).map((e=>e.openCompletion)));if(p&&(null==r?void 0:r.text.length)){let t=p.firstChild;t.to>e.pos-20&&!/\S/.test(e.state.sliceDoc(t.to,e.pos))&&(s=s.concat(r.text))}return{from:c,options:s,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}return null}}const Je=W.define({name:"xml",parser:y.configure({props:[I.add({Element(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"OpenTag CloseTag SelfClosingTag":e=>e.column(e.node.from)+e.unit}),B.add({Element(e){let t=e.firstChild,n=e.lastChild;return t&&"OpenTag"==t.name?{from:t.to,to:"CloseTag"==n.name?n.from:e.to}:null}}),Oe.add({"OpenTag CloseTag":e=>e.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/$/}});function Qe(e){return void 0===e&&(e={}),new j(Je,Je.data.of({autocomplete:Ae(e.elements||[],e.attributes||[])}))}}}]);